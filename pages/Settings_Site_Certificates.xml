<skuid__page personalizationmode="client" unsavedchangeswarning="yes" showsidebar="true" showheader="true" theme="Skuid Admin">
	<models>
		<model id="page_ui_control" query="true" createrowifnonefound="true" datasource="Ui-Only">
			<fields>
				<field id="sortby" displaytype="PICKLIST" ogdisplaytype="TEXT" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue" defaultValue="-updated_at">
					<picklistentries>
						<entry value="-updated_at" label="Last Updated"/>
						<entry value="name" label="Name A-Z"/>
					</picklistentries>
				</field>
			</fields>
			<conditions/>
			<actions>
				<action>
					<actions>
						<action type="branch" whenfinished="stop" model="page_ui_control" label="If sort is set...">
							<formula>NOT(ISBLANK({{sortby}}))</formula>
							<iftrueactions>
								<action type="requeryModel" model="stng__Certificates" behavior="standard"/>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>sortby</field>
					</fields>
				</action>
			</actions>
		</model>
		<model id="stng__DataSources_Site" limit="1" query="true" createrowifnonefound="false" datasource="SkuidLocal" type="readwrite" label="Site" labelplural="Sites" namefield="name" unloadwarningifunsavedchanges="true">
			<fields>
				<field id="subdomain" label="Subdomain" displaytype="TEXT" accessible="true" filterable="true" readonly="true"/>
				<field id="name" label="Name" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="jwt_signing_cert_id" label="Jwt Signing Cert Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
			</fields>
			<idfields>
				<field>subdomain</field>
			</idfields>
			<conditions/>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/site" payloadcontenttype="JSON"/>
			</methods>
		</model>
		<model id="stng__Certificates" query="false" createrowifnonefound="false" datasource="SkuidLocal" type="readwrite" label="Certificate" labelplural="Certificates" namefield="name">
			<fields>
				<field id="created_at" label="Created At" displaytype="DATETIME" accessible="true" filterable="true" readonly="true"/>
				<field id="created_by_id" label="Created By" displaytype="TEXT" accessible="true" filterable="true" readonly="true"/>
				<field id="created_by.name" label="Name" displaytype="TEXT" accessible="true" filterable="true" readonly="true"/>
				<field id="expiration_date" label="Expiration Date" displaytype="DATETIME" accessible="true" filterable="true" readonly="true"/>
				<field id="id" label="Id" displaytype="TEXT" readonly="true" accessible="true" filterable="true"/>
				<field id="is_active" label="Active" displaytype="BOOLEAN" accessible="true" filterable="true" readonly="false"/>
				<field id="is_site_jwt_cert" displaytype="FORMULA" uionly="true" ogdisplaytype="TEXT" readonly="true" returntype="BOOLEAN">
					<formula>MODEL_LOOKUP("stng__DataSources_Site","jwt_signing_cert_id") === {{id}}</formula>
				</field>
				<field id="key_size" label="Key Size" displaytype="DOUBLE" precision="4" scale="0" accessible="true" filterable="true" readonly="true"/>
				<field id="Label__ui" displaytype="FORMULA" uionly="true" label="Label" ogdisplaytype="TEXT" readonly="true" returntype="TEXT" defaultvaluetype="fieldvalue">
					<formula>IF(
(({{type}}=="CA-Signed") &amp;&amp; ({{is_active}}!=true)),
"certificate signing request",
"certificate"
)</formula>
				</field>
				<field id="name" label="Name" displaytype="TEXT" accessible="true" filterable="true" required="true"/>
				<field id="name_valid" displaytype="FORMULA" uionly="true" returntype="BOOLEAN">
					<formula>c__ALPHANUMERIC({{name}})</formula>
				</field>
				<field id="pretty_updated_date" displaytype="FORMULA" ogdisplaytype="TEXT" readonly="true" returntype="TEXT" uionly="true">
					<formula>IF({{created_at}}={{updated_at}},
JOIN_TEXT( " ","Created", DATE_DIFF({{updated_at}}) ),
JOIN_TEXT( " ","Updated", DATE_DIFF({{updated_at}}) )
)</formula>
				</field>
				<field id="summary" label="Summary" displaytype="TEXTAREA" accessible="true" filterable="true" readonly="true" ogdisplaytype="STRING"/>
				<field id="type" label="Type" displaytype="TEXT" accessible="true" filterable="true" readonly="true" ogdisplaytype="STRING"/>
				<field id="updated_at" label="Updated At" displaytype="DATETIME" accessible="true" filterable="true" readonly="true"/>
				<field id="updated_by_id" label="Updated By" displaytype="TEXT" accessible="true" filterable="true" readonly="true"/>
				<field id="updated_by.name" label="Name" displaytype="TEXT" accessible="true" filterable="true" readonly="true"/>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="fieldvalue" value="" sourcetype="param" sourceparam="search" operator="=" enclosevalueinquotes="true" state="filterableoff" inactive="true" name="search"/>
				<condition type="modelmerge" value="" sourcetype="param" sourceparam="sortby" operator="=" model="page_ui_control" enclosevalueinquotes="true" mergefield="sortby" novaluebehavior="deactivate" state="filterableon" inactive="false" name="sortby"/>
			</conditions>
			<actions>
				<action>
					<actions>
						<action type="publish" scope="skuid" event="skuid.settings.certificatesUpdated">
							<params/>
						</action>
					</actions>
					<events>
						<event>models.saved</event>
					</events>
				</action>
			</actions>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/certificate?order={{sortby}}{{#search}}&amp;search={{.}}{{/search}}&amp;fields=created_at,created_by_id,created_by.first_name,created_by.last_name,expiration_date,id,is_active,key_size,name,updated_at,updated_by_id,updated_by.first_name,updated_by.last_name,summary,type" payloadcontenttype="JSON" simplerecordslimitparameter="limit" limit="100" limitmethod="simple" paginationmethod="simple" offsetparameter="offset"/>
				<method type="update" verb="PATCH" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/auth/certificate/{{id}}"/>
				<method type="delete" verb="DELETE" endpoint="/auth/certificate/{{id}}" successif="requestsucceeds"/>
			</methods>
		</model>
		<model id="stng__NewCertificate" limit="1" query="false" createrowifnonefound="false" datasource="SkuidLocal" type="readwrite" label="Certificate" labelplural="Certificates" namefield="name">
			<fields>
				<field id="name" displaytype="TEXT" label="Certificate Name" required="true"/>
				<field id="commonName" displaytype="TEXT" label="Common Name" required="false"/>
				<field id="organization" displaytype="TEXT" label="Company Name" required="false"/>
				<field id="organizationUnit" displaytype="TEXT" label="Department" required="false"/>
				<field id="emailAddress" displaytype="EMAIL" label="Email Address" required="false" helptext="The email for the department that manages certifications for the company."/>
				<field id="locality" displaytype="TEXT" label="City" required="false"/>
				<field id="state" displaytype="TEXT" label="State/Province" required="false"/>
				<field id="country" displaytype="TEXT" label="Country Code" required="false"/>
				<field id="keySize" displaytype="PICKLIST" ogdisplaytype="TEXT" picklistsource="manual" label="Key Size" required="true" defaultvaluetype="fieldvalue" defaultValue="2048">
					<picklistentries>
						<entry value="2048" label="2048"/>
						<entry value="4096" label="4096"/>
					</picklistentries>
				</field>
				<field id="type" displaytype="PICKLIST" ogdisplaytype="TEXT" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue" defaultValue="self-signed" enclosevalueinquotes="true" uionly="true">
					<picklistentries>
						<entry value="self-signed" label="Self Signed"/>
						<entry value="ca-signed" label="CA Signed"/>
					</picklistentries>
				</field>
				<field id="name_valid" displaytype="FORMULA" uionly="true" returntype="BOOLEAN">
					<formula>c__ALPHANUMERIC({{name}})</formula>
				</field>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="type" state="filterableoff" inactive="true" name="type" model=""/>
			</conditions>
			<actions>
				<action>
					<actions>
						<action type="publish" scope="skuid" event="skuid.settings.certificatesUpdated">
							<params/>
						</action>
					</actions>
					<events>
						<event>models.saved</event>
					</events>
				</action>
			</actions>
			<methods>
				<method type="insert" verb="POST" successif="requestsucceeds" sendchanges="asjsoninbody" insertresponse="recordinbody" endpoint="/auth/certificate/{{type}}"/>
			</methods>
		</model>
	</models>
	<components>
		<skuid__grid uniqueid="grid-certificates-header" flexDirection="row" justifyContent="flex-start" alignItems="center" columnGutter="0" rowGutter="0">
			<divisions>
				<division minWidth="100px" ratio="1">
					<components>
						<skuid__text contents="Certificates" uniqueid="sk-3u1r-9934" styleSettingsVariant="014b3346-10ed-4578-aa1a-cae68a21cc80"/>
					</components>
				</division>
				<division alignSelf="auto" minWidth="100px" ratio="1">
					<components>
						<skuid__buttonSet model="stng__Certificates" uniqueid="sk-3Zw7-166035">
							<groups>
								<skuid__buttonGroup>
									<buttons>
										<skuid__button label="Create" uniqueid="button-certificates-create" styleSettingsVariant="primary">
											<actions>
												<action type="emptyModelData">
													<models>
														<model>stng__NewCertificate</model>
													</models>
												</action>
												<action type="createRow" model="stng__NewCertificate" appendorprepend="prepend" defaultmodefornewitems="edit" affectedrows="context"/>
												<action type="showModal">
													<skuid__modal title="Create New Certificate" width="640px" styleSettingsVariant="33581c3c-777b-4fc9-8b90-d931f31c8f95">
														<components>
															<skuid__wrapper uniqueid="sk-ve3-21971">
																<components>
																	<skuid__messageArea uniqueid="sk-32r-15198">
																		<group>
																			<skuid__messageBlock title="Name not valid" description="Name must only contain alpha-numeric characters" styleSettingsVariant="errorStrong">
																				<renderConditions logictype="and"/>
																			</skuid__messageBlock>
																		</group>
																		<styles>
																			<spacing bottom="3"/>
																		</styles>
																		<renderConditions logictype="and">
																			<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name_valid" fieldtargetobjects="SkuidLocal" value="false"/>
																			<renderCondition type="blank" operator="!=" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																		</renderConditions>
																	</skuid__messageArea>
																	<skuid__form showErrorsInline="true" model="stng__NewCertificate" uniqueid="form-certificates-new-step1" mode="edit">
																		<columns>
																			<column verticalAlign="top" ratio="1">
																				<sections>
																					<section showHeading="false">
																						<fields>
																							<skuid__field id="name" uniqueid="field-certificates-new-name" showHelp="true"/>
																							<skuid__field id="keySize" uniqueid="field-certificates-new-keysize" displayAs="RADIO"/>
																							<skuid__field id="type" uniqueid="field-certificates-new-type" showHelp="true" label="Type" required="true" displayAs="RADIO"/>
																							<skuid__field id="commonName" uniqueid="field-certificates-new-commonname" required="true" showHelp="true">
																								<renderConditions logictype="and" onhidedatabehavior="keep">
																									<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" field="type" value="ca-signed"/>
																								</renderConditions>
																								<enableConditions/>
																							</skuid__field>
																						</fields>
																					</section>
																					<section title="Company information">
																						<renderConditions logictype="and" onhidedatabehavior="keep">
																							<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" field="type" value="ca-signed"/>
																						</renderConditions>
																						<enableConditions/>
																						<fields>
																							<columns>
																								<column verticalAlign="top" ratio="1">
																									<sections>
																										<section showHeading="false">
																											<fields>
																												<skuid__field id="organization" uniqueid="field-certificates-new-organization" required="true" showHelp="true"/>
																											</fields>
																										</section>
																									</sections>
																								</column>
																								<column verticalAlign="top" ratio="1">
																									<sections>
																										<section showHeading="false">
																											<fields>
																												<skuid__field id="organizationUnit" uniqueid="field-certificates-new-unit" required="true" showHelp="true"/>
																											</fields>
																										</section>
																									</sections>
																								</column>
																							</columns>
																							<skuid__field id="locality" uniqueid="field-certificates-new-locality" required="true" showHelp="true"/>
																							<columns>
																								<column verticalAlign="top" ratio="1">
																									<sections>
																										<section showHeading="false">
																											<fields>
																												<skuid__field id="state" uniqueid="field-certificates-new-state" required="true" showHelp="true"/>
																											</fields>
																										</section>
																									</sections>
																								</column>
																								<column verticalAlign="top" ratio="1">
																									<sections>
																										<section showHeading="false">
																											<fields>
																												<skuid__field id="country" uniqueid="field-certificates-new-country" required="true" showHelp="true"/>
																											</fields>
																										</section>
																									</sections>
																								</column>
																							</columns>
																							<skuid__field id="emailAddress" uniqueid="field-certificates-new-email" showHelp="belowlabel"/>
																						</fields>
																					</section>
																				</sections>
																			</column>
																		</columns>
																		<styles>
																			<spacing/>
																		</styles>
																	</skuid__form>
																</components>
																<styles>
																	<spacing left="3" right="3" bottom="3" top="3"/>
																</styles>
																<background/>
															</skuid__wrapper>
															<skuid__wrapper uniqueid="sk-vex-28990" styleSettingsVariant="04fd592a-6f76-4508-b19c-ee3b1c7bb66c">
																<components>
																	<skuid__wrapper uniqueid="sk-veE-24503" styleSettingsVariant="127a15a3-f039-4e89-a282-c1f25b6f8d26">
																		<components/>
																		<background/>
																		<styles>
																			<spacing/>
																		</styles>
																	</skuid__wrapper>
																	<skuid__wrapper uniqueid="sk-vdy-19009">
																		<components>
																			<skuid__buttonSet model="stng__Certificates" uniqueid="sk-3ZzX-185931" position="left">
																				<groups>
																					<skuid__buttonGroup>
																						<buttons>
																							<skuid__button label="Create" uniqueid="button-certificates-new-save" styleSettingsVariant="primary">
																								<actions>
																									<action type="save">
																										<models>
																											<model>stng__NewCertificate</model>
																										</models>
																										<onerroractions>
																											<action type="showToast" duration="6" styleSettingsVariant="error" message="There was an error creating the Certificate: {{insertResults.0.errors.0.message}}"/>
																										</onerroractions>
																									</action>
																									<action type="requeryModel" model="stng__Certificates" behavior="standard"/>
																									<action type="closeTopmostPopup"/>
																									<action type="emptyModelData">
																										<models>
																											<model>stng__NewCertificate</model>
																										</models>
																									</action>
																									<action type="showToast" duration="4" styleSettingsVariant="default" message="Certificate created"/>
																								</actions>
																								<hotkeys>
																									<hotkey modifiers="ctrl,meta" key="s" ignoretextinputs="true"/>
																								</hotkeys>
																								<renderConditions logictype="and"/>
																								<enableConditions logictype="and">
																									<condition type="blank" operator="!=" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																									<condition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__NewCertificate" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name_valid" fieldtargetobjects="SkuidLocal" value="true"/>
																								</enableConditions>
																								<styleVariantConditions/>
																							</skuid__button>
																							<skuid__button label="{{$Label.Cancel}}" uniqueid="button-certificates-new-cancel">
																								<actions>
																									<action type="emptyModelData">
																										<models>
																											<model>stng__NewCertificate</model>
																										</models>
																									</action>
																									<action type="closeTopmostPopup"/>
																								</actions>
																							</skuid__button>
																						</buttons>
																					</skuid__buttonGroup>
																				</groups>
																			</skuid__buttonSet>
																		</components>
																		<background/>
																		<styles>
																			<spacing top="2" bottom="2" left="3" right="3"/>
																		</styles>
																	</skuid__wrapper>
																</components>
																<background type="color" color="white"/>
															</skuid__wrapper>
														</components>
														<buttons/>
													</skuid__modal>
												</action>
											</actions>
										</skuid__button>
									</buttons>
								</skuid__buttonGroup>
								<skuid__buttonGroup displayType="detached">
									<buttons>
										<skuid__button uniqueid="button-certifictes-menuoptions" icon="sk-webicon-ink:dots-vertical" styleSettingsVariant="borderless">
											<actions>
												<action type="toggleMenu">
													<optionGroups>
														<optionGroup>
															<options>
																<option label="Download default certificate">
																	<actions>
																		<action type="redirect" window="self" url="/api/v1/auth/download-default-certificate"/>
																	</actions>
																</option>
															</options>
														</optionGroup>
													</optionGroups>
												</action>
											</actions>
										</skuid__button>
									</buttons>
								</skuid__buttonGroup>
							</groups>
							<styles>
								<spacing/>
							</styles>
						</skuid__buttonSet>
					</components>
				</division>
			</divisions>
			<styles>
				<spacing bottom="4"/>
			</styles>
			<background/>
		</skuid__grid>
		<skuid__wrapper uniqueid="sk-3t6O-1674" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
			<components>
				<skuid__grid uniqueid="grid-certificates-filterset" flexDirection="row" justifyContent="flex-start" alignItems="center" columnGutter="0" rowGutter="0" fullWidth="true">
					<divisions>
						<division minWidth="100px" ratio="1" alignSelf="auto">
							<components/>
						</division>
						<division alignSelf="auto" ratio="0" minWidth="0px">
							<components>
								<skuid__text contents="&lt;div style=&quot;text-align: right;&quot;&gt;Order by:&lt;/div&gt;&#10;" uniqueid="sk-1g-g-15604">
									<styles>
										<spacing right="2"/>
									</styles>
								</skuid__text>
							</components>
						</division>
						<division alignSelf="auto" ratio="0">
							<components>
								<skuid__form showErrorsInline="true" model="page_ui_control" uniqueid="form-certificates-orderby" mode="edit">
									<styles>
										<spacing right="3" top="-1"/>
									</styles>
									<columns>
										<column verticalAlign="top" ratio="1">
											<sections>
												<section showHeading="false">
													<fields>
														<skuid__field id="sortby" uniqueid="sk-1g-r-19562" label=" "/>
													</fields>
												</section>
											</sections>
										</column>
									</columns>
								</skuid__form>
							</components>
						</division>
						<division alignSelf="auto" ratio="0">
							<components>
								<skuid__filterSet model="stng__Certificates" uniqueid="filterset-certificates" resetButtonBehavior="hide">
									<filters/>
									<filtering enableSearch="true" instantSearch="true" instantFilters="true" searchMethod="server" emptySearchBehavior="query" searchPlaceholder="Search" searchConditionName="search"/>
									<positioning justifyContent="space-between" alignItems="flex-end"/>
									<sorting enable="false"/>
									<styles>
										<spacing/>
									</styles>
								</skuid__filterSet>
							</components>
						</division>
					</divisions>
					<styles>
						<spacing bottom="2"/>
					</styles>
					<interactions/>
					<renderConditions logictype="and"/>
					<background/>
				</skuid__grid>
				<skuid__wrapper uniqueid="sk-1x60-11665" styleSettingsVariant="b5342fe9-7125-4bf8-b20b-ade1825d7e72">
					<components/>
					<background/>
					<renderConditions logictype="and"/>
					<styleVariantConditions/>
				</skuid__wrapper>
				<skuid__deck model="stng__Certificates" showSaveCancel="false" verticalAlign="top" minWidth="100%" uniqueid="deck-certificates" pageSize="25" setMaxWidth="auto" styleSettingsVariant="4b2278fd-5ea7-4353-9f43-6334d402167e">
					<components>
						<skuid__wrapper uniqueid="sk-1x5--9360" styleSettingsVariant="d07add8f-e8b4-4c56-a978-89018954d967">
							<components>
								<skuid__grid uniqueid="sk-1h24-11486" flexDirection="row" justifyContent="flex-start" alignItems="center" columnGutter="2" rowGutter="0">
									<divisions>
										<division minWidth="0" ratio="2" alignSelf="auto">
											<components>
												<skuid__grid uniqueid="sk-3u2k-29202" flexDirection="row" justifyContent="flex-start" alignItems="center">
													<divisions>
														<division minWidth="0" ratio="0" alignSelf="auto">
															<components>
																<skuid__list model="stng__Certificates" uniqueid="sk-1h3q-10669" pageSize="Infinity" showPageSizeSelect="false" resetPaginationOnQuery="false" showLoadMore="false" showListHeader="false" showListFooter="false" styleSettingsVariant="cf06b573-0083-4902-aaf4-65950a97bf81">
																	<columns>
																		<column uniqueid="sk-1h3t-12476" fillRatio="1">
																			<items>
																				<item displayType="icon" size="medium" fallback="sk-webicon-ink:approval" styleSettingsVariant="circular"/>
																			</items>
																		</column>
																	</columns>
																	<rowActions/>
																	<massActions/>
																	<filtering enableSearch="false" instantSearch="false"/>
																	<conditions>
																		<condition type="contextrow" field="id" mergefield="id" operator="="/>
																	</conditions>
																	<styles>
																		<spacing right="2"/>
																	</styles>
																	<sorting enable="false"/>
																</skuid__list>
															</components>
														</division>
														<division alignSelf="auto" minWidth="100px" ratio="1">
															<components>
																<skuid__text contents="{{name}}" uniqueid="field-certificates-name" model="stng__Certificates" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f">
																	<conditions>
																		<condition type="contextrow" field="id" mergefield="id" operator="="/>
																	</conditions>
																</skuid__text>
															</components>
														</division>
													</divisions>
												</skuid__grid>
											</components>
										</division>
										<division alignSelf="auto" minWidth="0" ratio="1">
											<components>
												<skuid__text contents="{{type}}" uniqueid="sk-YCT-7974" model="stng__Certificates" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f">
													<conditions>
														<condition type="contextrow" field="id" mergefield="id" operator="="/>
													</conditions>
												</skuid__text>
											</components>
										</division>
										<division alignSelf="auto" minWidth="0" ratio="1">
											<components>
												<skuid__grid uniqueid="sk-1h24-11489" flexDirection="row" justifyContent="flex-start" alignItems="center" columnGutter="1.5" rowGutter="0">
													<divisions>
														<division minWidth="0" ratio="0" alignSelf="auto">
															<components>
																<skuid__image source="url" datasource="SkuidLocal" height="" heightCustom="20px" model="stng__Certificates" url="/api/v1/me/{{updated_by_id}}/avatar/small" styleSettingsVariant="e84637e9-e395-4b14-9707-36f937394df8" heightStrategy="fixed" uniqueid="image-certificates-user-avatar" imageHeight="24px">
																	<conditions>
																		<condition type="contextrow" field="id" mergefield="id" operator="="/>
																	</conditions>
																	<styles>
																		<spacing/>
																	</styles>
																</skuid__image>
															</components>
														</division>
														<division alignSelf="auto" minWidth="0" ratio="0">
															<components>
																<skuid__text contents="{{updated_by.name}}" uniqueid="field-certificates-updatedby" model="stng__Certificates" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f">
																	<renderConditions logictype="and"/>
																	<styleVariantConditions/>
																	<conditions>
																		<condition type="contextrow" field="id" mergefield="id" operator="="/>
																	</conditions>
																</skuid__text>
																<skuid__text contents="{{pretty_updated_date}}" uniqueid="field-certificates-upadatedat" model="stng__Certificates" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f">
																	<conditions>
																		<condition type="contextrow" field="id" mergefield="id" operator="="/>
																	</conditions>
																	<renderConditions logictype="and"/>
																	<styleVariantConditions/>
																</skuid__text>
															</components>
														</division>
													</divisions>
													<styles>
														<spacing/>
													</styles>
												</skuid__grid>
											</components>
										</division>
										<division alignSelf="auto" minWidth="0" ratio="0">
											<components>
												<skuid__buttonSet model="stng__Certificates" uniqueid="sk-1h24-11497">
													<groups>
														<skuid__buttonGroup displayType="detached">
															<buttons>
																<skuid__button uniqueid="button-certificates-menuoptions" icon="sk-webicon-ink:dots-vertical" styleSettingsVariant="borderless">
																	<hotkeys/>
																	<renderConditions logictype="and"/>
																	<enableConditions/>
																	<actions>
																		<action type="toggleMenu">
																			<optionGroups>
																				<optionGroup>
																					<options>
																						<option label="Configure">
																							<actions>
																								<action type="action-sequence" action-sequence-id="7f0f33ac-7997-4385-a01c-70c2c3ef2399"/>
																							</actions>
																						</option>
																						<option label="Delete">
																							<actions>
																								<action type="showModal">
																									<skuid__modal title="Delete Certificate" width="640px">
																										<components>
																											<skuid__wrapper uniqueid="sk-1mud-36047" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
																												<components>
																													<skuid__grid uniqueid="sk-1sWh-27366" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="2" rowGutter="0">
																														<divisions>
																															<division minWidth="32px" ratio="1" alignSelf="auto" maxWidth="32px">
																																<components>
																																	<skuid__list model="stng__Certificates" uniqueid="sk-1sWk-29778" pageSize="Infinity" showPageSizeSelect="false" resetPaginationOnQuery="false" showLoadMore="false" showListHeader="false" showListFooter="false" styleSettingsVariant="cf06b573-0083-4902-aaf4-65950a97bf81">
																																		<columns>
																																			<column uniqueid="sk-1sWk-29779" fillRatio="1">
																																				<items>
																																					<item displayType="icon" size="medium" styleSettingsVariant="circular" fallback="sk-webicon-ink:approval"/>
																																				</items>
																																			</column>
																																		</columns>
																																		<rowActions/>
																																		<massActions/>
																																		<filtering enableSearch="false" instantSearch="false"/>
																																		<conditions>
																																			<condition type="contextrow" field="id" mergefield="id" operator="="/>
																																		</conditions>
																																		<styles>
																																			<spacing/>
																																		</styles>
																																	</skuid__list>
																																</components>
																															</division>
																															<division alignSelf="auto" minWidth="100px" ratio="1">
																																<components>
																																	<skuid__text contents="{{name}}" uniqueid="sk-1muQ-19873" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f" model="stng__Certificates">
																																		<styles>
																																			<spacing bottom="1" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f"/>
																																		</styles>
																																		<conditions>
																																			<condition type="contextrow" field="id" mergefield="id" operator="="/>
																																		</conditions>
																																	</skuid__text>
																																	<skuid__text contents="Created {{created_at}} by&amp;nbsp;{{created_by.name}}" uniqueid="sk-1muT-21127" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f" model="stng__Certificates">
																																		<styles>
																																			<spacing bottom=".5" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f"/>
																																		</styles>
																																		<conditions>
																																			<condition type="contextrow" field="id" mergefield="id" operator="="/>
																																		</conditions>
																																	</skuid__text>
																																	<skuid__text contents="Updated {{updated_at}} by&amp;nbsp;{{updated_by.name}}" uniqueid="sk-2S0s-9427" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f" model="stng__Certificates"/>
																																</components>
																															</division>
																														</divisions>
																													</skuid__grid>
																												</components>
																												<background/>
																												<styles>
																													<spacing bottom="3" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
																												</styles>
																											</skuid__wrapper>
																											<skuid__text contents="Are you sure you want to permanently delete this certificate? &lt;strong&gt;You can&amp;#39;t undo this&lt;/strong&gt;." uniqueid="sk-1ulC-23447">
																												<renderConditions logictype="and"/>
																												<styleVariantConditions/>
																											</skuid__text>
																										</components>
																										<buttons>
																											<skuid__button label="Yes, delete this certificate" styleSettingsVariant="destructive" uniqueid="button-certificates-list-delete-confirm">
																												<actions>
																													<action type="markRowsForDeletion" model="stng__Certificates" affectedrows="context"/>
																													<action type="save">
																														<models>
																															<model>stng__Certificates</model>
																														</models>
																														<onerroractions>
																															<action type="showToast" message="There was an error.  {{insertResults.0.errors.0.message}}" timeout="3000" duration="4" styleSettingsVariant="error"/>
																														</onerroractions>
																													</action>
																													<action type="closeModals" closebehavior="close"/>
																													<action type="showToast" duration="4" styleSettingsVariant="default" message="Certificate deleted"/>
																												</actions>
																												<renderConditions logictype="and"/>
																												<enableConditions logictype="and" message="This Certificate cannot be deleted because it is being used as the Site's JWT Signing Certificate.">
																													<condition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="fieldvalue" field="is_site_jwt_cert" fieldtargetobjects="SkuidLocal" value="false"/>
																												</enableConditions>
																											</skuid__button>
																											<skuid__button label="Cancel" uniqueid="button-certificates-list-delete-cancel">
																												<actions>
																													<action type="closeModals" closebehavior="close"/>
																												</actions>
																											</skuid__button>
																										</buttons>
																										<afterCloseActions/>
																									</skuid__modal>
																								</action>
																							</actions>
																						</option>
																					</options>
																				</optionGroup>
																			</optionGroups>
																		</action>
																	</actions>
																	<styleVariantConditions/>
																</skuid__button>
															</buttons>
														</skuid__buttonGroup>
													</groups>
													<conditions>
														<condition type="contextrow" field="id" mergefield="id" operator="="/>
													</conditions>
													<renderConditions logictype="and"/>
													<styleVariantConditions/>
												</skuid__buttonSet>
											</components>
										</division>
									</divisions>
									<interactions/>
									<background/>
								</skuid__grid>
							</components>
							<background/>
						</skuid__wrapper>
					</components>
					<filtering enableSearch="false" instantSearch="false"/>
					<interactions>
						<interaction type="tap">
							<action type="action-sequence" action-sequence-id="7f0f33ac-7997-4385-a01c-70c2c3ef2399"/>
						</interaction>
					</interactions>
					<renderConditions logictype="and"/>
					<styleVariantConditions/>
					<sorting enable="false"/>
				</skuid__deck>
			</components>
			<background/>
		</skuid__wrapper>
		<skuid__wrapper uniqueid="sk-2TOE-82590" heightStrategy="fixed" height="custom" heightCustom="500px">
			<components/>
			<styles>
				<spacing/>
			</styles>
			<background/>
		</skuid__wrapper>
	</components>
	<resources>
		<labels/>
		<javascript>
			<jsitem location="inline" name="alphanumeric validation" cachelocation="false">skuid.formula.Formula("ALPHANUMERIC",function (param) {
	var regex = /^[a-z0-9]+$/i;
    return (param &amp;&amp; !!regex.exec(param));
}, {
	numArgs: 1,
	returnType: "boolean"
});</jsitem>
		</javascript>
		<css/>
		<actionsequences>
			<actionsequence id="7f0f33ac-7997-4385-a01c-70c2c3ef2399" label="View Cert Details" type="reusable">
				<description/>
				<actions>
					<action type="showModal">
						<skuid__modal title="Certificate Details: {{name}}" width="640px">
							<components>
								<skuid__messageArea uniqueid="sk-355-36352">
									<group>
										<skuid__messageBlock description="Name must only contain alpha-numeric characters" title="Name is not valid" styleSettingsVariant="errorStrong"/>
									</group>
									<styles>
										<spacing bottom="3"/>
									</styles>
									<renderConditions logictype="and">
										<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name_valid" fieldtargetobjects="SkuidLocal" value="false"/>
									</renderConditions>
								</skuid__messageArea>
								<skuid__buttonSet uniqueid="sk-3ZpW-86624" model="stng__Certificates">
									<groups>
										<skuid__buttonGroup>
											<buttons>
												<skuid__button label="Download {{Label__ui}}" uniqueid="button-certificates-details-download">
													<actions>
														<action type="redirect" window="self" url="/api/v1/auth/certificate/{{{id}}}/download"/>
													</actions>
													<renderConditions logictype="and"/>
													<enableConditions/>
													<styleVariantConditions/>
												</skuid__button>
												<skuid__button label="Download RSA Public Key" uniqueid="button-certificates-details-download-public-key">
													<actions>
														<action type="redirect" window="self" url="/api/v1/auth/certificate/{{{id}}}/download-rsa-public-key"/>
													</actions>
													<renderConditions logictype="and"/>
													<enableConditions/>
													<styleVariantConditions/>
												</skuid__button>
												<skuid__button label="Upload signed certificate" uniqueid="button-certificates-details-upload">
													<renderConditions logictype="and">
														<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="is_active" fieldtargetobjects="SkuidLocal" value="false"/>
														<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="type" fieldtargetobjects="SkuidLocal" value="CA-Signed"/>
													</renderConditions>
													<condition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="is_active" fieldtargetobjects="SkuidLocal" value="true"/>
													<condition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="type" fieldtargetobjects="SkuidLocal" value="CA-Signed"/>
													<enableConditions logictype="and"/>
													<actions>
														<action type="showModal">
															<skuid__modal title="Upload Signed Certificate" width="640px">
																<components>
																	<skuid__file storeAs="uploadfilewithcontext" displayAs="filename" uniqueid="fileupload-certificates-details-upload" datasource="SkuidLocal" url="/auth/certificate/{{{id}}}/upload-signed-certificate" model="stng__Certificates">
																		<uploadSuccessActions>
																			<action type="requeryModel" model="stng__Certificates" behavior="standard"/>
																			<action type="closeAllPopups"/>
																			<action type="showToast" duration="4" styleSettingsVariant="default" message="Sucessfully uploaded certificate"/>
																		</uploadSuccessActions>
																		<uploadFailureActions>
																			<action type="showToast" duration="6" styleSettingsVariant="error" message="There was an error uploading the signed certificate: {{$Error.message}}"/>
																		</uploadFailureActions>
																	</skuid__file>
																</components>
															</skuid__modal>
														</action>
													</actions>
													<styleVariantConditions/>
													<hotkeys/>
												</skuid__button>
											</buttons>
										</skuid__buttonGroup>
									</groups>
									<conditions>
										<condition type="contextrow" field="id" mergefield="id"/>
									</conditions>
								</skuid__buttonSet>
								<skuid__form showErrorsInline="true" model="stng__Certificates" uniqueid="form-certificates-details" mode="edit">
									<conditions/>
									<columns>
										<column verticalAlign="top" ratio="1" behavior="flex" minWidth="100px">
											<sections>
												<section title="Certificate" showHeading="false">
													<renderConditions logictype="and"/>
													<fields>
														<skuid__field id="name" uniqueid="field-certificates-details-name" showHelp="true" label="Certificate name">
															<renderConditions logictype="and" onhidedatabehavior="keep"/>
															<enableConditions/>
														</skuid__field>
														<columns>
															<column verticalAlign="top" ratio="1" behavior="flex" minWidth="100px">
																<sections>
																	<section showHeading="false">
																		<fields>
																			<skuid__field id="is_active" uniqueid="field-certificates-details-active" showHelp="true">
																				<renderConditions logictype="and" onhidedatabehavior="keep"/>
																				<enableConditions/>
																			</skuid__field>
																		</fields>
																	</section>
																</sections>
															</column>
															<column verticalAlign="top" ratio="1" behavior="flex" minWidth="100px">
																<sections>
																	<section showHeading="false">
																		<fields>
																			<skuid__field id="type" uniqueid="field-certificates-details-type" showHelp="true">
																				<renderConditions logictype="and" onhidedatabehavior="keep"/>
																				<enableConditions/>
																			</skuid__field>
																		</fields>
																	</section>
																</sections>
															</column>
														</columns>
														<columns>
															<column verticalAlign="top" ratio="1">
																<sections>
																	<section showHeading="false">
																		<fields>
																			<skuid__field id="key_size" uniqueid="field-certificates-details-keysize" showHelp="true">
																				<renderConditions logictype="and" onhidedatabehavior="keep"/>
																				<enableConditions/>
																			</skuid__field>
																		</fields>
																	</section>
																</sections>
															</column>
															<column verticalAlign="top" ratio="1">
																<sections>
																	<section showHeading="false">
																		<fields>
																			<skuid__field id="expiration_date" uniqueid="field-certificates-details-expiration" showHelp="true" label="Expiration">
																				<renderConditions logictype="and" onhidedatabehavior="keep"/>
																				<enableConditions/>
																			</skuid__field>
																		</fields>
																	</section>
																</sections>
															</column>
														</columns>
													</fields>
												</section>
												<section title="History" showHeading="false">
													<renderConditions logictype="and"/>
													<fields>
														<skuid__field type="COMBO" uniqueid="field-certificates-details-createdby" template="Created by {{created_by.name}}, {{created_at}}&#10;Last Modified By {{updated_by.name}}, {{updated_at}}" readOnly="true" label=" History" allowHtml="true">
															<renderConditions logictype="and" onhidedatabehavior="keep"/>
															<enableConditions/>
														</skuid__field>
													</fields>
												</section>
												<section title="Summary" showHeading="false">
													<renderConditions logictype="and"/>
													<fields>
														<skuid__field id="summary" uniqueid="field-certificates-details-summary" label="Summary" showHelp="true">
															<renderConditions logictype="and" onhidedatabehavior="keep"/>
															<enableConditions/>
														</skuid__field>
													</fields>
												</section>
											</sections>
										</column>
									</columns>
								</skuid__form>
							</components>
							<buttons>
								<skuid__button label="Save" uniqueid="button-certificates-details-save" styleSettingsVariant="primary">
									<tooltip/>
									<actions>
										<action type="save">
											<models>
												<model>stng__Certificates</model>
											</models>
										</action>
										<action type="closeTopmostPopup"/>
										<action type="showToast" message="Certificate details saved"/>
									</actions>
									<renderConditions logictype="and"/>
									<enableConditions logictype="and">
										<condition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="modelproperty" sourceproperty="hasChanged" value="true"/>
										<condition type="blank" operator="!=" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
										<condition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name_valid" fieldtargetobjects="SkuidLocal" value="true"/>
									</enableConditions>
									<styleVariantConditions/>
								</skuid__button>
								<skuid__button label="Cancel" uniqueid="button-certificates-details-cancel">
									<actions>
										<action type="cancel">
											<models>
												<model>stng__Certificates</model>
											</models>
										</action>
										<action type="closeTopmostPopup"/>
									</actions>
									<renderConditions logictype="and"/>
									<enableConditions logictype="and"/>
									<styleVariantConditions/>
								</skuid__button>
							</buttons>
							<afterCloseActions>
								<action type="cancel">
									<models>
										<model>stng__Certificates</model>
									</models>
								</action>
							</afterCloseActions>
						</skuid__modal>
					</action>
				</actions>
				<inputs/>
			</actionsequence>
		</actionsequences>
	</resources>
	<styles>
		<styleitem type="background" bgtype="none"/>
	</styles>
</skuid__page>

<skuid__page personalizationmode="client" unsavedchangeswarning="yes" title="Auth Provider {{#$Model.stng__AuthProvider.data}}{{#name}}: {{$Model.stng__AuthProvider.data.0.name}}{{/name}}{{/$Model.stng__AuthProvider.data}}" theme="Skuid Admin">
	<models>
		<model id="stng__AuthProvider" query="true" createrowifnonefound="true" datasource="SkuidLocal" label="Authentication Provider" labelplural="Authentication Providers" type="readwrite" namefield="name">
			<methods>
				<method type="query" verb="GET" payloadcontenttype="JSON" endpoint="/objects/authprovider/{{id}}?fields=name,id,oauth_provider_type,oauth_grant_type,auth_method,authorize_endpoint_url,token_endpoint_url,client_id,client_secret,default_scopes,auth_method,token_request_body_parameters,signing_certificate_id,signing_certificate.name,request_headers,created_at,updated_at,created_by_id,created_by.first_name,created_by.last_name,updated_by_id,updated_by.first_name,updated_by.last_name,claims,algorithm"/>
				<method type="insert" verb="POST" successif="requestsucceeds" sendchanges="asjsoninbody" insertresponse="recordinbody" endpoint="/objects/authprovider"/>
				<method type="update" verb="PUT" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/objects/authprovider/{{id}}"/>
				<method type="delete" verb="DELETE" endpoint="/objects/authprovider/{{id}}" successif="requestsucceeds"/>
			</methods>
			<fields>
				<field id="id" displaytype="TEXT" label="Id" readonly="true"/>
				<field id="name" displaytype="TEXT" label="Name" length="255" required="true" helptext="Must only contain alpha-numeric characters and underscores"/>
				<field id="authorize_endpoint_url" displaytype="TEXT" label="Authorize Endpoint URL" length="500"/>
				<field id="token_endpoint_url" displaytype="TEXT" label="Token Endpoint URL" length="500"/>
				<field id="client_id" displaytype="TEXT" label="Client Id"/>
				<field id="client_secret" displaytype="TEXT" label="Client Secret"/>
				<field id="default_scopes" displaytype="TEXT" label="Default Scopes"/>
				<field id="request_headers" displaytype="TEXT" label="Request Headers" length="255"/>
				<field id="oauth_provider_type" displaytype="PICKLIST" defaultValue="salesforce" label="Provider Type" picklistsource="snippet" snippet="AuthProviderTypesPicklist" defaultvaluetype="fieldvalue" returntype="TEXT"/>
				<field id="oauth_grant_type" displaytype="PICKLIST" defaultValue="explicit" label="OAuth Grant Type" picklistsource="manual" returntype="TEXT">
					<picklistentries>
						<entry label="Authorization Code" value="explicit"/>
						<entry label="Client Credentials" value="client_credentials"/>
						<entry label="Implicit" value="implicit"/>
						<entry label="JWT Bearer Assertion" value="jwt-bearer"/>
						<entry label="Resource Owner Password Credentials" value="password"/>
						<entry label="SAML 2.0 Bearer Assertion" value="saml2-bearer"/>
					</picklistentries>
				</field>
				<field id="auth_method" displaytype="PICKLIST" defaultValue="oauth2" label="Authentication Method" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue">
					<picklistentries>
						<entry value="oauth2" label="OAuth 2.0 / OpenID"/>
						<entry value="aws_assume_role_with_arn" label="AWS: Assume Role with ARN"/>
						<entry value="aws_keys" label="AWS: Access Keys"/>
					</picklistentries>
				</field>
				<field id="token_request_body_parameters" displaytype="TEXT" label="Token Request Body Parameters" defaultValue="{}"/>
				<field id="claims" displaytype="TEXT" label="Claims" defaultValue="{}"/>
				<field id="algorithm" displaytype="PICKLIST" label="JWT Signing Algorithm" defaultValue="RS256" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue">
					<picklistentries>
						<entry value="RS256" label="RS256"/>
						<entry value="RS384" label="RS384"/>
						<entry value="RS512" label="RS512"/>
						<entry value="PS256" label="PS256"/>
						<entry value="PS384" label="PS384"/>
					</picklistentries>
				</field>
				<field id="signing_certificate_id" label="Signing Certificate" displaytype="REFERENCE" accessible="true" filterable="true" ogdisplaytype="STRING" datasource="SkuidLocal" rel="signing_certificate" keyfield="id" searchroute="/objects/certificate?fields=id,name&amp;order=name&amp;search={{search}}">
					<batchfields/>
				</field>
				<field id="signing_certificate.name" displaytype="TEXT" label="Signing Certificate" readonly="true"/>
				<field id="SP_CompanyName" uionly="true" displaytype="TEXT" label="Company Name"/>
				<field id="SP_SiteCollection" uionly="true" displaytype="TEXT" label="Site Collection Path"/>
				<field id="SP_AuthUrlFormula" uionly="true" displaytype="FORMULA" label="Sharepoint Auth URL Formula" readonly="true" returntype="TEXT">
					<formula>IF({{{oauth_provider_type}}}=="sharepointonline","https://"+{{{SP_CompanyName}}}+".sharepoint.com"+{{{SP_SiteCollection}}}+"/_layouts/15/OauthAuthorize.aspx",null)</formula>
				</field>
				<field id="SP_TokenUrlFormula" uionly="true" displaytype="FORMULA" label="Sharepoint Token URL Formula" readonly="true" returntype="TEXT">
					<formula>IF({{{oauth_provider_type}}}=="sharepointonline","https://accounts.accesscontrol.windows.net/"+{{{SP_CompanyName}}}+".onmicrosoft.com/tokens/OAuth/2",null)</formula>
				</field>
				<field id="AuthMethodType__ui" uionly="true" displaytype="FORMULA" label="Auth Method Type" readonly="true" returntype="TEXT">
					<formula>IF({{auth_method}}==="apex","apex",
IF({{auth_method}}==="oauth1" || {{auth_method}}==="oauth2","oauth","other"))</formula>
				</field>
				<field id="SP_TokenReqBodyParamsFormula" uionly="true" displaytype="FORMULA" label="Token Req Body Params" readonly="true" returntype="TEXT">
					<formula>IF({{oauth_provider_type}}==='sharepointonline','{"resource":"00000003-0000-0ff1-ce00-000000000000/'+{{{SP_CompanyName}}}+'.sharepoint.com@'+{{{SP_CompanyName}}}+'.onmicrosoft.com"}','')</formula>
				</field>
				<field id="OAuthDefaultScopesFormula__ui" uionly="true" displaytype="FORMULA" label="Default Scopes Formula" readonly="true" returntype="TEXT">
					<formula>IF(
   (CONTAINS({{auth_method}},'oauth')&amp;&amp;({{oauth_provider_type}}=='salesforce')),
   IF({{oauth_grant_type}}=='explicit',
      'full,refresh_token','api'
   ),
   ''
)
</formula>
				</field>
				<field id="aws_role_client_id_ui" displaytype="TEXT" uionly="true" helptext="MUST contain &quot;skuid-assumable-role/&quot;" label="AWS Role ARN to assume" required="true" placeholder="e.g. arn:aws:iam::123456789012:role/skuid-assumable-role/CustomerPortalAccess" length="255"/>
				<field id="IsValid__ui" displaytype="FORMULA" uionly="true" ogdisplaytype="TEXT" readonly="true" returntype="BOOLEAN" label="Is Valid">
					<formula>NOT(ISBLANK({{client_id}})) &amp;&amp;
NOT(ISBLANK({{name}})) &amp;&amp;
NOT(ISBLANK({{auth_method}})) &amp;&amp;
IF({{auth_method}} == "aws_assume_role_with_arn",{{RoleArnIsValid__ui}},true)</formula>
				</field>
				<field id="RoleArnIsValid__ui" displaytype="FORMULA" uionly="true" label="Role ARN is valid" ogdisplaytype="TEXT" readonly="true" returntype="BOOLEAN">
					<formula>CONTAINS({{client_id}},"skuid-assumable-role/")</formula>
				</field>
				<field id="TrustRelationshipPolicy__ui" displaytype="TEXT" uionly="true" label="Configure your AWS Role with this Trust Relationship Policy:" readonly="true" length="255"/>
				<field id="name_valid" displaytype="BOOLEAN" uionly="true" ogdisplaytype="TEXT" defaultvaluetype="fieldvalue" defaultValue="true"/>
				<field id="created_at" label="Created At" ispolymorphic="false" isnamepointing="false" displaytype="DATETIME" accessible="true" filterable="true"/>
				<field id="created_by_id" label="Created By Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true" defaultvaluetype="fieldvalue" defaultValue="" enclosevalueinquotes="true"/>
				<field id="updated_at" label="Updated At" ispolymorphic="false" isnamepointing="false" displaytype="DATETIME" accessible="true" filterable="true"/>
				<field id="updated_by_id" label="Updated By Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="created_by.name" displaytype="TEXT"/>
				<field id="updated_by.name" displaytype="TEXT"/>
				<field id="StandardJWTClaims__ui" displaytype="TEXT" uionly="true" label="Standard Claims" readonly="true" defaultvaluetype="fieldvalue" length="255"/>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="param" value="id" enclosevalueinquotes="true" field="id" sourcetype="param" sourceparam="id" novaluebehavior="noquery"/>
			</conditions>
			<actions>
				<action>
					<actions>
						<action type="updateRow" fieldmodel="stng__AuthProvider" enclosevalueinquotes="true" affectedrows="context">
							<updates>
								<update valuesource="fieldvalue" field="request_headers" value="{}"/>
								<update valuesource="blank" field="authorize_endpoint_url"/>
								<update valuesource="blank" field="token_endpoint_url"/>
								<update valuesource="blank" field="oauth_provider_type"/>
								<update valuesource="blank" field="client_id"/>
								<update valuesource="blank" field="client_secret"/>
							</updates>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>auth_method</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" label="If SharePoint Online">
							<formula>{{{oauth_provider_type}}}=="sharepointonline"</formula>
							<iftrueactions>
								<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context" enclosevalueinquotes="true">
									<updates>
										<update valuesource="fieldvalue" field="authorize_endpoint_url" value="{{{SP_AuthUrlFormula}}}"/>
									</updates>
								</action>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>SP_AuthUrlFormula</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" label="If SharePoint Online">
							<formula>{{{oauth_provider_type}}}=="sharepointonline"</formula>
							<iftrueactions>
								<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context" enclosevalueinquotes="true">
									<updates>
										<update valuesource="fieldvalue" field="token_endpoint_url" value="{{{SP_TokenUrlFormula}}}"/>
									</updates>
								</action>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>SP_TokenUrlFormula</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" label="If SharePoint Online">
							<formula>{{{oauth_provider_type}}}=="sharepointonline"</formula>
							<iftrueactions>
								<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context" enclosevalueinquotes="true">
									<updates>
										<update valuesource="fieldvalue" field="token_request_body_parameters" value="{{{SP_TokenReqBodyParamsFormula}}}"/>
									</updates>
								</action>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>SP_TokenReqBodyParamsFormula</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="updateRow" fieldmodel="stng__AuthProvider" enclosevalueinquotes="true">
							<updates>
								<update valuesource="fieldvalue" field="default_scopes" value="{{{OAuthDefaultScopesFormula__ui}}}"/>
							</updates>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>OAuthDefaultScopesFormula__ui</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" label="If Auth = AWS Keys" whenfinished="stop">
							<formula>{{auth_method}}=="aws_keys"</formula>
							<iftrueactions>
								<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context" enclosevalueinquotes="true">
									<updates>
										<update valuesource="fieldvalue" field="oauth_provider_type" value="other"/>
									</updates>
								</action>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>auth_method</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context" enclosevalueinquotes="true">
							<updates>
								<update valuesource="fieldvalue" field="auth_method" value="oauth2"/>
							</updates>
						</action>
					</actions>
					<events>
						<event>row.created</event>
					</events>
				</action>
				<action>
					<actions>
						<action type="custom" snippet="skuid.settings.onAuthProviderTypeChange"/>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>oauth_grant_type</field>
						<field>oauth_provider_type</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" whenfinished="stop" label="if model still has unsaved changes">
							<formula>{{$Model.stng__AuthProvider.hasChanged}}</formula>
							<iftrueactions>
								<action type="cancel">
									<models>
										<model>stng__AuthProvider</model>
									</models>
								</action>
							</iftrueactions>
						</action>
						<action type="showToast" duration="4" styleSettingsVariant="default" message="Changes canceled"/>
					</actions>
					<events>
						<event>models.cancelled</event>
					</events>
				</action>
				<action>
					<actions>
						<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context">
							<updates>
								<update valuesource="fieldvalue" field="client_id" enclosevalueinquotes="true" value="{{aws_role_client_id_ui}}"/>
							</updates>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>aws_role_client_id_ui</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="custom" snippet="skuid.settings.AuthProviderNameRegExTest">
							<onerroractions>
								<action type="updateRow" message="There was an error" timeout="3000" fieldmodel="stng__AuthProvider" affectedrows="context">
									<updates>
										<update valuesource="fieldvalue" field="name_valid" enclosevalueinquotes="false" value="false"/>
									</updates>
								</action>
							</onerroractions>
						</action>
						<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context">
							<updates>
								<update valuesource="fieldvalue" field="name_valid" enclosevalueinquotes="false" value="true"/>
							</updates>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>name</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" whenfinished="stop" model="stng__AuthProvider">
							<formula>NOT(ISBLANK({{name}}))</formula>
							<iftrueactions>
								<action type="setCondition" model="stng__AuthProvider_DuplicateCheck" condition="searchterm" value="{{name}}"/>
								<action type="requeryModel" model="stng__AuthProvider_DuplicateCheck" behavior="standard"/>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>row.updated</event>
					</events>
					<fields>
						<field>name</field>
					</fields>
				</action>
				<action>
					<actions>
						<action type="branch" whenfinished="stop" model="stng__AuthProvider">
							<formula>{{auth_method}} === "aws_assume_role_with_arn"</formula>
							<iftrueactions>
								<action type="updateRow" fieldmodel="stng__AuthProvider" affectedrows="context">
									<updates>
										<update valuesource="fieldvalue" field="aws_role_client_id_ui" enclosevalueinquotes="true" value="{{client_id}}"/>
									</updates>
								</action>
								<action type="save">
									<models>
										<model>stng__AuthProvider</model>
									</models>
								</action>
							</iftrueactions>
						</action>
					</actions>
					<events>
						<event>models.loaded</event>
						<event>models.cancelled</event>
					</events>
				</action>
			</actions>
		</model>
		<model id="stng__DataSources_ReferenceCheck" query="false" createrowifnonefound="false" datasource="SkuidLocal" verb="GET" payloadcontenttype="JSON" endpoint="/objects/datasource?where={auth_provider_id:&quot;{{auth_provider_id}}&quot;}" unloadwarningifunsavedchanges="false">
			<fields>
				<field id="auth_provider_id" label="Auth Provider Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="id" label="Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="name" label="Name" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
			</fields>
			<conditions>
				<condition type="modelmerge" value="" sourcetype="param" sourceparam="auth_provider_id" operator="=" model="stng__AuthProvider" enclosevalueinquotes="true" mergefield="id" novaluebehavior="deactivate"/>
			</conditions>
			<actions/>
		</model>
		<model id="stng__AuthProvider_DuplicateCheck" query="false" createrowifnonefound="false" datasource="SkuidLocal" label="Authentication Provider" labelplural="Authentication Providers" verb="GET" endpoint="/objects/authprovider?where={name:&quot;{{searchterm}}&quot;}" payloadcontenttype="JSON" unloadwarningifunsavedchanges="false">
			<fields>
				<field id="id" label="Id" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="name" label="Name" ispolymorphic="false" isnamepointing="false" displaytype="STRING" accessible="true" filterable="true"/>
			</fields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="searchterm" state="filterableoff" inactive="true" name="searchterm"/>
			</conditions>
			<actions/>
		</model>
		<model id="stng__AuthProvider__SiteEnv" query="true" createrowifnonefound="false" datasource="SkuidLocal" processonclient="true" verb="GET" payloadcontenttype="JSON" endpoint="/metadata/siteenvironment" async="true">
			<fields>
				<field id="PLINY_ASSUME_ROLE_PROXY_ARN" label="PLINYASSUMEROLEPROXYARN" displaytype="TEXT" accessible="true" filterable="true"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="stng__Certificates" query="true" createrowifnonefound="false" datasource="SkuidLocal" verb="GET" payloadcontenttype="JSON" endpoint="/objects/certificate?fields=id,name&amp;order=name" async="true" label="Certificate" labelplural="Certificates" namefield="name">
			<fields>
				<field id="id" label="Id" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="name" label="Name" displaytype="STRING" accessible="true" filterable="true"/>
			</fields>
			<conditions/>
			<actions/>
			<idfields>
				<field>id</field>
			</idfields>
		</model>
	</models>
	<pageregioncontents>
		<pageregioncontent regionid="sk-2w1w-1416" uniqueid="sk-3_3j-2926">
			<components>
				<skuid__wrapper uniqueid="sk-3jR0-1768" styleSettingsVariant="b5342fe9-7125-4bf8-b20b-ade1825d7e72">
					<components>
						<skuid__grid uniqueid="sk--nF-13009" flexDirection="row" justifyContent="space-around" alignItems="flex-start">
							<divisions>
								<division alignSelf="auto" minWidth="100%" ratio="1" maxWidth="1440px">
									<components>
										<skuid__grid uniqueid="sk-2DiY-71335" flexDirection="row" justifyContent="flex-start" alignItems="center" columnGutter="4" rowGutter="0">
											<divisions>
												<division minWidth="100px" ratio="1">
													<components>
														<skuid__header uniqueid="sk-2mZA29-3083" title="New Authentication Provider" subtitle="">
															<skuid__buttonSet>
																<groups/>
															</skuid__buttonSet>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="rowproperty" nosourcerowbehavior="deactivate" sourceproperty="isNew"/>
															</renderConditions>
															<styles>
																<spacing/>
															</styles>
														</skuid__header>
														<skuid__text contents="Authentication provider" uniqueid="sk-3ow8-18907" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f">
															<renderConditions logictype="and">
																<renderCondition type="blank" operator="!=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="skipandnorender" field="id" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
															</renderConditions>
															<styleVariantConditions/>
														</skuid__text>
														<skuid__header uniqueid="sk-nJ0I2-509" title="{{name}}" model="stng__AuthProvider">
															<skuid__buttonSet>
																<groups/>
															</skuid__buttonSet>
															<renderConditions logictype="and">
																<renderCondition type="blank" operator="!=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="skipandnorender" field="id" value="null" enclosevalueinquotes="false"/>
															</renderConditions>
															<styleVariantConditions/>
														</skuid__header>
													</components>
												</division>
												<division alignSelf="auto" ratio="0">
													<components>
														<skuid__buttonSet uniqueid="sk-2Dif-73435" model="stng__AuthProvider">
															<groups>
																<skuid__buttonGroup>
																	<buttons>
																		<skuid__button label="{{$Label.Save}}" uniqueid="button-header-save" styleSettingsVariant="primary">
																			<renderConditions logictype="and"/>
																			<enableConditions logictype="and" message="Make sure all required fields are correctly entered.">
																				<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="true" operator="="/>
																				<condition type="fieldvalue" operator="=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="IsValid__ui" fieldtargetobjects="SkuidLocal" value="true" enclosevalueinquotes="false"/>
																			</enableConditions>
																			<actions>
																				<action type="branch" whenfinished="stop" label="if record is new, go to record detail" model="stng__AuthProvider">
																					<formula>{{Record.isNew}}</formula>
																					<iftrueactions>
																						<action type="save">
																							<models>
																								<model>stng__AuthProvider</model>
																							</models>
																							<onerroractions>
																								<action type="blockUI" message="There was an error" timeout="3000"/>
																							</onerroractions>
																						</action>
																						<action type="redirect" window="self" url="/ns/skuid/ui/authentication/{{$Model.stng__AuthProvider.data.0.id}}"/>
																					</iftrueactions>
																				</action>
																				<action type="save">
																					<models>
																						<model>stng__AuthProvider</model>
																					</models>
																					<onerroractions>
																						<action type="blockUI" message="There was an error" timeout="3000"/>
																					</onerroractions>
																				</action>
																			</actions>
																			<styleVariantConditions/>
																		</skuid__button>
																		<skuid__button label="{{$Label.Cancel}}" uniqueid="button-header-cancel">
																			<actions>
																				<action type="cancel">
																					<models>
																						<model>stng__AuthProvider</model>
																					</models>
																				</action>
																				<action type="branch" window="self" url="/ns/skuid/ui/datasources" whenfinished="stop" label="if record is new, go back when canceled">
																					<formula>{{$Model.stng__AuthProvider.data.length}}==0</formula>
																					<iftrueactions>
																						<action type="redirect" window="self" url="/ns/skuid/ui/datasources"/>
																					</iftrueactions>
																				</action>
																			</actions>
																			<renderConditions logictype="and"/>
																			<enableConditions logictype="and">
																				<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="true" operator="="/>
																			</enableConditions>
																		</skuid__button>
																	</buttons>
																	<renderConditions logictype="and"/>
																</skuid__buttonGroup>
																<skuid__buttonGroup>
																	<buttons>
																		<skuid__button label="Delete" uniqueid="button-delete-auth-provider">
																			<actions>
																				<action type="markRowsForDeletion" model="stng__AuthProvider" affectedrows="context"/>
																				<action type="requeryModels" behavior="standard">
																					<models>
																						<model>stng__DataSources_ReferenceCheck</model>
																					</models>
																				</action>
																				<action type="branch" whenfinished="stop" label="if AP is being used in Data Sources, do not let users delete it">
																					<formula>{{$Model.stng__DataSources_ReferenceCheck.data.length}} &gt; 0</formula>
																					<iftrueactions>
																						<action type="cancel">
																							<models>
																								<model>stng__AuthProvider</model>
																							</models>
																						</action>
																						<action type="showModal">
																							<skuid__modal title="Authentication Provider in use" width="640px">
																								<components>
																									<skuid__text contents="This authentication provider is being used in one or more data sources. You must remove it from the data sources before continuing to deletion&amp;nbsp;" uniqueid="sk-2RVM-111192">
																										<styles>
																											<spacing/>
																										</styles>
																									</skuid__text>
																									<skuid__text contents="Data source(s) using this authentication provider:" uniqueid="sk-2qPN-20055" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f">
																										<styles>
																											<spacing top="3" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f"/>
																										</styles>
																									</skuid__text>
																									<skuid__deck model="stng__DataSources_ReferenceCheck" showSaveCancel="false" verticalAlign="top" minWidth="100%" uniqueid="sk-2qMn-24498" pageSize="Infinity" showPageSizeSelect="false" resetPaginationOnQuery="false" showLoadMore="false" showListHeader="false" showListFooter="false" setMaxWidth="auto" rowGutter="8px">
																										<components>
																											<skuid__text contents="&amp;bull;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;/ns/skuid/ui/datasources/{{{id}}}&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;{{name}}&lt;/strong&gt;&lt;/a&gt;" uniqueid="sk-2qMn-24499">
																												<renderConditions logictype="and"/>
																												<styleVariantConditions/>
																											</skuid__text>
																										</components>
																										<filtering enableSearch="false" instantSearch="false"/>
																										<renderConditions logictype="and">
																											<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__DataSources_ReferenceCheck" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasRows"/>
																										</renderConditions>
																										<styleVariantConditions/>
																										<sorting enable="false"/>
																										<styles>
																											<spacing top="1"/>
																										</styles>
																									</skuid__deck>
																								</components>
																								<buttons>
																									<skuid__button uniqueid="button-close-modal" label="Okay" styleSettingsVariant="primary">
																										<actions>
																											<action type="closeAllPopups"/>
																										</actions>
																									</skuid__button>
																								</buttons>
																							</skuid__modal>
																						</action>
																					</iftrueactions>
																				</action>
																				<action type="showModal">
																					<skuid__modal title="Delete Authentication Provider" width="640px">
																						<components>
																							<skuid__wrapper uniqueid="sk-1mud-36047" styleSettingsVariant="7d5572d7-ec59-43f0-9d03-5259d1980637">
																								<components>
																									<skuid__grid uniqueid="sk-1sWh-27366" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="2" rowGutter="0">
																										<divisions>
																											<division minWidth="32px" ratio="1" alignSelf="auto" maxWidth="32px">
																												<components>
																													<skuid__list model="stng__AuthProvider" uniqueid="sk-2RZm-15538" pageSize="Infinity" showPageSizeSelect="false" resetPaginationOnQuery="false" showLoadMore="false" showListHeader="false" showListFooter="false" styleSettingsVariant="cf06b573-0083-4902-aaf4-65950a97bf81">
																														<columns>
																															<column>
																																<items>
																																	<item displayType="icon" size="medium" fallback="sk-webicon-ink:lock"/>
																																</items>
																															</column>
																														</columns>
																														<rowActions/>
																														<massActions/>
																														<filtering enableSearch="false" instantSearch="false"/>
																														<interactions/>
																														<renderConditions logictype="and"/>
																														<styleVariantConditions/>
																														<styles>
																															<spacing/>
																														</styles>
																														<conditions/>
																													</skuid__list>
																												</components>
																											</division>
																											<division alignSelf="auto" minWidth="100px" ratio="1">
																												<components>
																													<skuid__text contents="{{name}}" uniqueid="sk-1muQ-19873" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f" model="stng__AuthProvider">
																														<styles>
																															<spacing bottom="1" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f"/>
																														</styles>
																													</skuid__text>
																													<skuid__text contents="Created {{created_at}} by&amp;nbsp;{{created_by.name}}" uniqueid="sk-1muT-21127" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f" model="stng__AuthProvider">
																														<styles>
																															<spacing bottom=".5" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f"/>
																														</styles>
																														<conditions/>
																													</skuid__text>
																													<skuid__text contents="Updated {{updated_at}} by&amp;nbsp;{{updated_by.name}}" uniqueid="sk-2Nq7-20758" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f" model="stng__AuthProvider">
																														<styles>
																															<spacing bottom=".5" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f"/>
																														</styles>
																													</skuid__text>
																												</components>
																											</division>
																										</divisions>
																									</skuid__grid>
																								</components>
																								<background/>
																								<styles>
																									<spacing bottom="3" styleSettingsVariant="7d5572d7-ec59-43f0-9d03-5259d1980637"/>
																								</styles>
																							</skuid__wrapper>
																							<skuid__text contents="Are you sure you want to permanently delete this authentication provider? &lt;strong&gt;You can&amp;#39;t undo this&lt;/strong&gt;." uniqueid="sk-1mwL-33076">
																								<renderConditions logictype="and"/>
																								<styleVariantConditions/>
																								<styles>
																									<spacing/>
																								</styles>
																							</skuid__text>
																						</components>
																						<buttons>
																							<skuid__button label="Yes, delete this authentication provider" uniqueid="button-save-auth-provider-deletion" styleSettingsVariant="destructive">
																								<actions>
																									<action type="save">
																										<models>
																											<model>stng__AuthProvider</model>
																										</models>
																									</action>
																									<action type="closeTopmostPopup"/>
																									<action type="redirect" window="self" url="/ns/skuid/ui/datasources"/>
																								</actions>
																							</skuid__button>
																							<skuid__button label="Cancel" uniqueid="button-cancel-auth-provider-deletion">
																								<actions>
																									<action type="cancel">
																										<models>
																											<model>stng__AuthProvider</model>
																										</models>
																									</action>
																									<action type="closeTopmostPopup"/>
																								</actions>
																							</skuid__button>
																						</buttons>
																					</skuid__modal>
																				</action>
																			</actions>
																			<renderConditions logictype="and"/>
																			<enableConditions logictype="and">
																				<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="false" operator="="/>
																				<condition fieldmodel="stng__AuthProvider" sourcetype="rowproperty" nosourcerowbehavior="deactivate" sourceproperty="isSaved" enclosevalueinquotes="false"/>
																			</enableConditions>
																			<styleVariantConditions/>
																		</skuid__button>
																	</buttons>
																	<renderConditions logictype="and">
																		<renderCondition fieldmodel="stng__AuthProvider" sourcetype="rowproperty" nosourcerowbehavior="deactivate" sourceproperty="isSaved" enclosevalueinquotes="false"/>
																	</renderConditions>
																</skuid__buttonGroup>
															</groups>
															<styles>
																<spacing/>
															</styles>
															<renderConditions logictype="and"/>
															<styleVariantConditions/>
														</skuid__buttonSet>
													</components>
												</division>
											</divisions>
											<background/>
										</skuid__grid>
									</components>
								</division>
							</divisions>
							<styles>
								<spacing top="4" bottom="4" left="4" right="4"/>
							</styles>
							<background/>
						</skuid__grid>
					</components>
					<background/>
					<renderConditions logictype="and"/>
				</skuid__wrapper>
				<skuid__grid uniqueid="sk--nN-17591" flexDirection="row" justifyContent="space-around" alignItems="flex-start">
					<divisions>
						<division alignSelf="auto" minWidth="100%" ratio="1" maxWidth="1440px">
							<components>
								<skuid__wrapper uniqueid="sk-2nCEhk-379">
									<components>
										<skuid__text contents="Basics" uniqueid="sk-3oxr-39028" styleSettingsVariant="014b3346-10ed-4578-aa1a-cae68a21cc80">
											<styles>
												<spacing bottom="2"/>
											</styles>
										</skuid__text>
										<skuid__grid uniqueid="sk-1H1w-29898" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="0" rowGutter="0">
											<divisions>
												<division minWidth="100%" ratio="1" alignSelf="auto" maxWidth="732px">
													<components>
														<skuid__wrapper uniqueid="sk-2EOv-30289" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__messageArea uniqueid="sk-2M-D-14342">
																	<group>
																		<skuid__messageBlock title="Name is not valid" description="Name must only contain alpha-numeric characters and underscores" styleSettingsVariant="errorStrong"/>
																	</group>
																	<renderConditions logictype="and">
																		<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="name_valid" fieldtargetobjects="SkuidLocal" value="false"/>
																	</renderConditions>
																	<styles>
																		<spacing bottom="3"/>
																	</styles>
																</skuid__messageArea>
																<skuid__messageArea uniqueid="sk-3Ebd-14912">
																	<group>
																		<skuid__messageBlock title="Name is already in use" description="Enter a different Authentication Provider name" styleSettingsVariant="errorStrong">
																			<renderConditions logictype="and"/>
																		</skuid__messageBlock>
																	</group>
																	<renderConditions logictype="and">
																		<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider_DuplicateCheck" sourcetype="modelproperty" nosourcerowbehavior="deactivate" fieldtargetobjects="SkuidLocal" sourceproperty="hasRows"/>
																	</renderConditions>
																	<styles>
																		<spacing bottom="3"/>
																	</styles>
																</skuid__messageArea>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-3_CR-89275" mode="edit">
																	<styles>
																		<spacing bottom="2"/>
																	</styles>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="How does this provider perform its authentication?" showHeading="false">
																					<fields>
																						<skuid__field id="name" uniqueid="sk-2EOn-29896" showHelp="belowlabel"/>
																						<skuid__field id="auth_method" uniqueid="sk-3_87-71873" required="false" addNoneOption="true" showHelp="true" displayAs="BUTTON_GROUP">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="rowproperty" sourceproperty="isNew"/>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																						<skuid__field id="auth_method" showHelp="true" readOnly="true">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition fieldmodel="stng__AuthProvider" sourcetype="rowproperty" sourceproperty="isSaved" enclosevalueinquotes="false"/>
																							</renderConditions>
																							<enableConditions/>
																						</skuid__field>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<styles>
																<spacing bottom="4" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
															</styles>
														</skuid__wrapper>
													</components>
												</division>
											</divisions>
										</skuid__grid>
										<skuid__text contents="Configuration" uniqueid="sk-3oy1-42690" styleSettingsVariant="014b3346-10ed-4578-aa1a-cae68a21cc80">
											<styles>
												<spacing bottom="2"/>
											</styles>
										</skuid__text>
										<skuid__grid uniqueid="sk-1-HC-254562" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="0" rowGutter="0">
											<divisions>
												<division minWidth="100%" ratio="1" alignSelf="auto" maxWidth="732px">
													<components>
														<skuid__wrapper uniqueid="sk-2Dg7-37768" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-1-HC-254585" mode="edit">
																	<renderConditions logictype="and"/>
																	<styles>
																		<spacing/>
																	</styles>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section showHeading="false">
																					<fields>
																						<skuid__field id="client_id" uniqueid="sk-1-HC-254587" label="Access Key Id" required="true" showHelp="true"/>
																						<skuid__field id="client_secret" uniqueid="sk-1-HC-254589" label="Secret Access Key" required="true" showHelp="true"/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="aws_keys"/>
															</renderConditions>
															<styleVariantConditions/>
														</skuid__wrapper>
														<skuid__wrapper uniqueid="sk-2MrA-12746" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__messageArea uniqueid="sk-2Mrq-22891">
																	<group>
																		<skuid__messageBlock title="Error" description="The Role ARN must contain &quot;skuid-assumable-role/&quot;" styleSettingsVariant="errorStrong">
																			<renderConditions logictype="and">
																				<renderCondition type="blank" operator="!=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="client_id" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																				<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="RoleArnIsValid__ui" fieldtargetobjects="SkuidLocal" value="false"/>
																			</renderConditions>
																		</skuid__messageBlock>
																	</group>
																	<styles>
																		<spacing bottom="3"/>
																	</styles>
																	<renderConditions logictype="and">
																		<renderCondition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" sourceproperty="hasRows" operator="=" field="RoleArnIsValid__ui" fieldtargetobjects="SkuidLocal" value="false"/>
																		<renderCondition type="blank" operator="!=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="client_id" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																		<renderCondition type="blank" operator="!=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="aws_role_client_id_ui" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																	</renderConditions>
																</skuid__messageArea>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="form_aws_assume_role_with_arn" mode="edit">
																	<renderConditions logictype="and"/>
																	<styleVariantConditions/>
																	<styles>
																		<spacing/>
																	</styles>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section showHeading="false">
																					<fields>
																						<skuid__field id="aws_role_client_id_ui" uniqueid="input_aws_role_arn" showHelp="belowlabel"/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
																<skuid__wrapper uniqueid="sk-wVe-19190">
																	<components>
																		<skuid__text contents="Trust Relationship Policy" uniqueid="sk-wVi-21736" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f">
																			<styles>
																				<spacing/>
																			</styles>
																		</skuid__text>
																		<skuid__text contents="Configure your AWS Role with this Trust Relationship Policy" uniqueid="sk-wVt-61191" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f">
																			<styles>
																				<spacing top="1" styleSettingsVariant="ef8d4ab0-3722-4e16-903c-ec582c9ca67f"/>
																			</styles>
																		</skuid__text>
																	</components>
																	<styles>
																		<spacing top="3"/>
																	</styles>
																	<background/>
																</skuid__wrapper>
																<skuid__wrapper uniqueid="wrapper-trust-relationship-policy" styleSettingsVariant="f8016967-2b43-498e-86e9-721ef3fd62ca">
																	<components>
																		<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-wVb-16796" mode="edit">
																			<renderConditions logictype="and"/>
																			<styleVariantConditions/>
																			<styles>
																				<spacing left="3" right="3"/>
																			</styles>
																			<columns>
																				<column verticalAlign="top" ratio="1">
																					<sections>
																						<section showHeading="false">
																							<fields>
																								<skuid__field id="TrustRelationshipPolicy__ui" displayAs="CUSTOM" fieldRenderer="trustRelationshipPolicy" label=" ">
																									<renderConditions logictype="and" onhidedatabehavior="keep">
																										<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider__SiteEnv" sourcetype="modelproperty" sourceproperty="hasRows"/>
																									</renderConditions>
																									<enableConditions/>
																								</skuid__field>
																							</fields>
																						</section>
																					</sections>
																				</column>
																			</columns>
																		</skuid__form>
																		<skuid__buttonSet model="stng__AuthProvider" uniqueid="sk-hyq-22982" position="left">
																			<groups>
																				<skuid__buttonGroup>
																					<buttons>
																						<skuid__button label="Copy to clipboard" uniqueid="button-copy-trust-rel-policy-to-clipboard">
																							<tooltip position="top"/>
																							<actions>
																								<action type="custom" snippet="copyToClipboard">
																									<onerroractions>
																										<action type="showToast" message="There was an error" timeout="3000" duration="4" styleSettingsVariant="error"/>
																									</onerroractions>
																								</action>
																								<action type="showToast" duration="4" styleSettingsVariant="default" message="Copied!"/>
																							</actions>
																							<renderConditions logictype="and"/>
																							<enableConditions/>
																							<styleVariantConditions/>
																						</skuid__button>
																					</buttons>
																				</skuid__buttonGroup>
																			</groups>
																			<styles>
																				<spacing bottom="3" left="3"/>
																			</styles>
																		</skuid__buttonSet>
																	</components>
																	<background color="#FBFBFB"/>
																	<styles>
																		<spacing top="1.5"/>
																	</styles>
																</skuid__wrapper>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="aws_assume_role_with_arn"/>
															</renderConditions>
															<styleVariantConditions/>
														</skuid__wrapper>
													</components>
												</division>
											</divisions>
											<renderConditions logictype="and"/>
											<styleVariantConditions/>
										</skuid__grid>
										<skuid__grid uniqueid="sk-2Dg4-30380" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="0" rowGutter="0">
											<divisions>
												<division minWidth="100%" ratio="1" alignSelf="auto" maxWidth="732px">
													<components>
														<skuid__wrapper uniqueid="sk-2DgR-39713" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-2Dg4-30381" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="OAuth Configuration" showHeading="false">
																					<fields>
																						<skuid__field id="oauth_provider_type" uniqueid="sk-2Dg4-30383" required="true" displayAs="COMBOBOX"/>
																						<skuid__field id="oauth_grant_type" uniqueid="sk-2Dg4-30385" required="true"/>
																						<skuid__field id="SP_CompanyName" showHelp="true">
																							<renderConditions logictype="and">
																								<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_provider_type" value="sharepointonline"/>
																							</renderConditions>
																						</skuid__field>
																						<skuid__field id="SP_SiteCollection" showHelp="true">
																							<renderConditions logictype="and">
																								<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_provider_type" value="sharepointonline"/>
																							</renderConditions>
																						</skuid__field>
																						<skuid__field id="authorize_endpoint_url" uniqueid="sk-2Dg4-30387" required="true" showHelp="true">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																									<values>
																										<value>implicit</value>
																										<value>explicit</value>
																									</values>
																								</renderCondition>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
																<skuid__wrapper uniqueid="sk-2MKP-35113">
																	<components>
																		<skuid__text contents="Replace&amp;nbsp;&lt;strong&gt;&amp;lt;My Domain&amp;gt;&lt;/strong&gt; with your own domain" uniqueid="sk-2MKL-32718" styleSettingsVariant="4aecbd92-c77d-460b-8eb6-2d916be113ec">
																			<renderConditions logictype="and">
																				<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_provider_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																					<values>
																						<value>onedrive</value>
																						<value>salesforce</value>
																						<value>msdynamics</value>
																					</values>
																				</renderCondition>
																			</renderConditions>
																			<styleVariantConditions/>
																			<styles>
																				<spacing top="1" styleSettingsVariant="4aecbd92-c77d-460b-8eb6-2d916be113ec"/>
																			</styles>
																		</skuid__text>
																	</components>
																	<background/>
																	<renderConditions logictype="and">
																		<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>explicit</value>
																				<value>implicit</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<styles>
																		<spacing/>
																	</styles>
																</skuid__wrapper>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="new-authprovider-token-endpoint-url" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>explicit</value>
																				<value>client_credentials</value>
																				<value>jwt-bearer</value>
																				<value>password</value>
																				<value>saml2-bearer</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<styles>
																		<spacing top="3"/>
																	</styles>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="OAuth Configuration" showHeading="false">
																					<fields>
																						<skuid__field id="token_endpoint_url" uniqueid="sk-2MKD-28135" required="true" showHelp="true">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																									<values>
																										<value>client_credentials</value>
																										<value>explicit</value>
																										<value>jwt-bearer</value>
																										<value>password</value>
																										<value>saml2-bearer</value>
																									</values>
																								</renderCondition>
																							</renderConditions>
																							<enableConditions/>
																							<styleVariantConditions/>
																						</skuid__field>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
																<skuid__text contents="Replace&amp;nbsp;&lt;strong&gt;&amp;lt;My Domain&amp;gt;&lt;/strong&gt; with your own domain" uniqueid="text-new-auth-sf-token-endpoint-help-text" styleSettingsVariant="4aecbd92-c77d-460b-8eb6-2d916be113ec">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_provider_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>salesforce</value>
																			</values>
																		</renderCondition>
																		<renderCondition type="fieldvalue" operator="!=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="implicit"/>
																	</renderConditions>
																	<styleVariantConditions/>
																	<styles>
																		<spacing top="1" styleSettingsVariant="4aecbd92-c77d-460b-8eb6-2d916be113ec"/>
																	</styles>
																</skuid__text>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-2MKD-28131" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<styles>
																		<spacing top="3"/>
																	</styles>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="OAuth Configuration" showHeading="false">
																					<fields>
																						<skuid__field id="default_scopes" uniqueid="sk-2MKD-28137">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="multiple" operator="not in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" enclosevalueinquotes="true">
																									<values>
																										<value>implicit</value>
																										<value>jwt-bearer</value>
																										<value>saml2-bearer</value>
																									</values>
																								</renderCondition>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																						<skuid__field id="StandardJWTClaims__ui" displayAs="CUSTOM" fieldRenderer="standardJWTClaimsJSON">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" fieldtargetobjects="SkuidLocal" value="jwt-bearer"/>
																							</renderConditions>
																							<enableConditions/>
																						</skuid__field>
																						<skuid__field id="claims" uniqueid="sk-16_g71-1938" showHelp="true" displayAs="CUSTOM" fieldRenderer="jsonEditor" label="Custom Claims">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="fieldvalue" operator="=" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" value="jwt-bearer" enclosevalueinquotes="true"/>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																						<skuid__field id="algorithm" required="true" uniqueid="sk-a9879c-278c">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" enclosevalueinquotes="true">
																									<values>
																										<value>jwt-bearer</value>
																									</values>
																								</renderCondition>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																						<skuid__field id="signing_certificate_id" uniqueid="sk-2CKD-38291" displayAs="PICKLIST" required="true" addNoneOption="true" optionSource="model" optionModel="stng__Certificates" displayTemplate="{{name}}" searchTemplate="{{name}}" pageSize="5">
																							<renderConditions logictype="and" onhidedatabehavior="keep">
																								<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_grant_type" enclosevalueinquotes="true">
																									<values>
																										<value>jwt-bearer</value>
																										<value>saml2-bearer</value>
																									</values>
																								</renderCondition>
																								<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="stng__Certificates" sourcetype="modelproperty" sourceproperty="hasRows" value="true"/>
																							</renderConditions>
																							<enableConditions logictype="and"/>
																						</skuid__field>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
															</renderConditions>
															<styles>
																<spacing bottom="2" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
															</styles>
															<styleVariantConditions/>
														</skuid__wrapper>
														<skuid__wrapper uniqueid="sk-16-6-26087" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-16_c-10374" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="Client Credentials" showHeading="false">
																					<fields>
																						<skuid__field id="client_id" uniqueid="sk-16_c-10386" required="true"/>
																						<skuid__field id="client_secret" uniqueid="sk-16_c-10388" displayAs="PASSWORD" required="true"/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
															</renderConditions>
															<styles>
																<spacing bottom="2" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
															</styles>
															<styleVariantConditions/>
														</skuid__wrapper>
														<skuid__wrapper uniqueid="sk-16-6-25316" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-16_f-13333" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="Additional Token Request Body Parameters" showHeading="false">
																					<renderConditions logictype="and">
																						<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
																						<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" field="oauth_provider_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																							<values>
																								<value>sharepointonline</value>
																								<value>other</value>
																							</values>
																						</renderCondition>
																					</renderConditions>
																					<fields>
																						<skuid__field id="token_request_body_parameters" uniqueid="sk-16_f-13339" showHelp="true" displayAs="CUSTOM" fieldRenderer="jsonEditor" label="Additional Token Request Body Parameters"/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
																<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="oauth_provider_type" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																	<values>
																		<value>sharepointonline</value>
																		<value>other</value>
																	</values>
																</renderCondition>
															</renderConditions>
															<styles>
																<spacing bottom="2" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
															</styles>
															<styleVariantConditions/>
														</skuid__wrapper>
														<skuid__wrapper uniqueid="sk-16-6-24551" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
															<components>
																<skuid__form showErrorsInline="true" model="stng__AuthProvider" uniqueid="sk-16_i-16074" mode="edit">
																	<renderConditions logictype="and">
																		<renderCondition type="multiple" operator="in" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="" enclosevalueinquotes="true">
																			<values>
																				<value>oauth2</value>
																			</values>
																		</renderCondition>
																	</renderConditions>
																	<styleVariantConditions/>
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="Common Request Headers" showHeading="false">
																					<renderConditions logictype="and"/>
																					<fields>
																						<skuid__field id="request_headers" uniqueid="sk-16_i-16078" showHelp="true" displayAs="CUSTOM" fieldRenderer="jsonEditor" label="Common Request Headers"/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
															</components>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
															</renderConditions>
															<styles>
																<spacing bottom="2" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0"/>
															</styles>
															<styleVariantConditions/>
														</skuid__wrapper>
													</components>
													<renderConditions logictype="and"/>
												</division>
											</divisions>
											<renderConditions logictype="and">
												<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="auth_method" fieldtargetobjects="SkuidLocal" value="oauth2"/>
											</renderConditions>
											<styleVariantConditions/>
										</skuid__grid>
									</components>
									<renderConditions logictype="and">
										<renderCondition type="fieldvalue" enclosevalueinquotes="true" fieldmodel="stng__AuthProvider" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasRows"/>
									</renderConditions>
									<background/>
									<styleVariantConditions/>
								</skuid__wrapper>
							</components>
						</division>
					</divisions>
					<styles>
						<spacing left="4" right="4" top="4" bottom="4"/>
					</styles>
					<background/>
				</skuid__grid>
			</components>
		</pageregioncontent>
	</pageregioncontents>
	<components/>
	<resources>
		<labels/>
		<javascript>
			<jsitem location="staticresource" namespace="skuid" filepath="js/lib/jsonEditor/jsoneditor.min.js"/>
			<jsitem location="inline" name="JSONEditorCSS" cachelocation="false" url="">(function(skuid){
var $ = skuid.$;
	$(document.body).one('pageload',function(){
		addCSS('/assets/jsonEditor/jsoneditor.min.css');

        // Include CSS file
        function addCSS(filename){
         var head = document.getElementsByTagName('head')[0];
        
         var style = document.createElement('link');
         style.href = filename;
         style.type = 'text/css';
         style.rel = 'stylesheet';
         head.append(style);
        }
	});
})(skuid);</jsitem>
			<jsitem location="staticresource" namespace="skuid" filepath="js/skuidPages/skuidSettings.js" scope="api"/>
			<jsitem location="fieldrenderer" name="trustRelationshipPolicy" cachelocation="false" url="">var FieldRenderer = skuid.component.FieldRenderer;

return new FieldRenderer({
  // Options are "virtual", or "element"
  readModeStrategy: "virtual",
  read: function (fieldComponent, starterDefinition) {
    // contains model, row, value, element, and field
    var context = fieldComponent.cpi.getContext();
	var h = fieldComponent.h;
    var siteEnvModel = skuid.model.getModel("stng__AuthProvider__SiteEnv");
    var proxyRoleArn = siteEnvModel.getRows().length ? siteEnvModel.getFirstRow().PLINY_ASSUME_ROLE_PROXY_ARN : "";
    var policyJSON = JSON.stringify({
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Principal": {
            "AWS": proxyRoleArn || "",
          },
          "Action": "sts:AssumeRole",
          "Condition": {
            "StringEquals": {
              "sts:ExternalId": skuid.utils.userInfo.organizationId
            }
          }
        }
      ]
    }, undefined, 2);
    var authModel = skuid.model.getModel('stng__AuthProvider');
    authModel.updateRow(authModel.getFirstRow(), {TrustRelationshipPolicy__ui: policyJSON});
    return h("div", {}, [
      h("pre", {styles:{margin:0}}, [policyJSON])
    ]);
  }
});</jsitem>
			<jsitem location="inlinesnippet" name="copyToClipboard" cachelocation="false">var params = arguments[0],
$ = skuid.$;

var siteEnvModel = skuid.model.getModel("stng__AuthProvider__SiteEnv");
var proxyRoleArn = siteEnvModel.getRows().length ? siteEnvModel.getFirstRow().PLINY_ASSUME_ROLE_PROXY_ARN : "";
var policyJSON = JSON.stringify({
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": proxyRoleArn || "",
      },
      "Action": "sts:AssumeRole",
      "Condition": {
        "StringEquals": {
          "sts:ExternalId": skuid.utils.userInfo.organizationId
        }
      }
    }
  ]
}, undefined, 2);

navigator.clipboard.writeText(policyJSON);</jsitem>
			<jsitem location="fieldrenderer" name="standardJWTClaimsJSON" cachelocation="false" url="">var FieldRenderer = skuid.component.FieldRenderer;

return new FieldRenderer({
  readModeStrategy: "virtual",
  read: function (fieldComponent) {
	var h = fieldComponent.h;
    var value = {
        "iat": "&lt;Current Time&gt;",
        "nbf": "&lt;Current Time&gt;",
        "exp": "&lt;Current Time + 3 Minutes&gt;",
        "jti": "&lt;Auto-generated UUID&gt;"
    };
    return h("div", {}, [
      h("pre", {styles:{margin:0}}, [JSON.stringify(value, undefined, 2)])
    ]);
  }
});</jsitem>
		</javascript>
		<actionsequences>
			<actionsequence id="c49708cd-91a2-4d57-b3a1-986da33b6364" label="Navigation Control" type="event-triggered" event-scope="component" event-name="page.rendered">
				<description/>
				<actions>
					<action type="updateRow" fieldmodel="NavUiControl" affectedrows="context">
						<updates>
							<update valuesource="fieldvalue" field="GlobalNavController" enclosevalueinquotes="true" value="DATA"/>
						</updates>
					</action>
				</actions>
			</actionsequence>
		</actionsequences>
	</resources>
</skuid__page>

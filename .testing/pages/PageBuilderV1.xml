<skuidpage unsavedchangeswarning="yes" hideeditbutton="true" title="{{#$Model.page.data}}{{name}}{{/$Model.page.data}}">
	<models>
		<model id="page" limit="1" query="true" createrowifnonefound="false" processonclient="true" datasource="SkuidLocal" type="readwrite" label="Page" labelplural="Pages" namefield="name">
			<fields>
				<field id="id" label="Id" displaytype="TEXT" createable="false" editable="false"/>
				<field id="name" label="Name" displaytype="TEXT" length="255"/>
				<field id="content" label="Content" displaytype="TEXTAREA"/>
				<field id="api_version" label="Skuid API Version" displaytype="TEXT"/>
				<field id="max_auto_saves" label="Max Auto Saves" displaytype="INTEGER"/>
				<field id="composer_settings" label="Composer Settings" displaytype="TEXT"/>
				<field id="is_master_page" label="Is Master Page" displaytype="BOOLEAN"/>
				<field id="master_page_id" label="Master Page Id" displaytype="TEXT" createable="true" editable="true"/>
				<field id="master_page.id" label="Master Page Id" displaytype="TEXT" createable="false" editable="false" readonly="true"/>
				<field id="master_page.name" label="Master Page Name" displaytype="TEXT" length="255" readonly="true"/>
				<field id="master_page.content" label="Master Page Content" displaytype="TEXTAREA" readonly="true"/>
				<field id="theme_id" label="Theme" displaytype="TEXT" accessible="true" createable="false" editable="true" filterable="true" defaultvaluetype="fieldvalue"/>
			</fields>
			<conditions>
				<condition type="param" field="id" enclosevalueinquotes="true" sourcetype="param" sourceparam="pageid" value="id"/>
			</conditions>
			<idfields>
				<field>id</field>
			</idfields>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/page/{{pageid}}?fields=id,name,content,api_version,max_auto_saves,is_master_page,master_page_id,master_page.id,master_page.name,master_page.content,composer_settings,theme_id"/>
				<method type="update" verb="PATCH" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/objects/page/{{id}}"/>
				<method type="delete" verb="DELETE" endpoint="/objects/page/{{id}}" successif="requestsucceeds"/>
			</methods>
		</model>
		<model id="versions" limit="10" query="true" createrowifnonefound="false" processonclient="true" datasource="SkuidLocal" type="readwrite" label="Page Revision" labelplural="Page Revisions" namefield="description">
			<fields>
				<field id="created_at" label="Created" displaytype="DATETIME"/>
				<field id="is_autosave" label="Is Auto-Save" displaytype="BOOLEAN"/>
				<field id="description" label="Description" displaytype="TEXT"/>
				<field id="api_version" label="Skuid API Version" displaytype="TEXT"/>
				<field id="id" label="Id" displaytype="TEXT" createable="false" editable="false"/>
				<field id="created_by_id" label="Created By" displaytype="TEXT" createable="false" editable="false"/>
				<field id="created_by.name" label="Created By" displaytype="TEXT" accessible="true" filterable="true"/>
				<field id="page_id" label="Page Id" displaytype="TEXT" createable="true" editable="false" required="true"/>
				<field id="content" displaytype="TEXT"/>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="param" field="page_id" enclosevalueinquotes="true" sourcetype="param" sourceparam="pageid" value="id"/>
				<condition type="fieldvalue" value=",is_autosave: false" enclosevalueinquotes="true" sourcetype="param" sourceparam="IsNotAutoSave" state="filterableoff" inactive="true" name="IsNotAutoSave"/>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="search" state="filterableoff" inactive="true" name="search"/>
			</conditions>
			<actions>
				<action>
					<actions>
						<action type="updateRow" fieldmodel="versions" field="page_id" enclosevalueinquotes="false" value="{{$Model.page.data.0.id}}"/>
					</actions>
					<events>
						<event>row.created</event>
					</events>
				</action>
				<action>
					<actions>
						<action type="requeryModel" model="versions" behavior="standard"/>
					</actions>
					<events>
						<event>models.saved</event>
					</events>
				</action>
			</actions>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/pageversion?order=-created_at&amp;fields=created_at,is_autosave,description,api_version,id,created_by_id,created_by.first_name,created_by.last_name,page_id&amp;where={page_id:&quot;{{pageid}}&quot;{{IsNotAutoSave}}}{{#search}}&amp;search={{.}}{{/search}}"/>
				<method type="update" verb="PATCH" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/objects/pageversion/{{id}}"/>
				<method type="insert" verb="POST" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/objects/pageversion"/>
				<method type="delete" verb="DELETE" endpoint="/objects/pageversion/{{id}}" successif="requestsucceeds"/>
			</methods>
		</model>
		<model id="pageBuilder_SelectedVersion" limit="10" query="false" createrowifnonefound="false" processonclient="true" datasource="SkuidLocal" type="readwrite" label="Selected Page Revision" labelplural="Selected Page Revisions">
			<fields>
				<field id="id"/>
				<field id="api_version"/>
				<field id="content"/>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="selectedversionid" state="filterableoff" inactive="true" name="selectedversionid"/>
			</conditions>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/pageversion/{{selectedversionid}}?fields=id,api_version,content"/>
			</methods>
		</model>
		<model id="pagebuilder_ChildPages" query="false" createrowifnonefound="false" datasource="SkuidLocal" label="Child Page" labelplural="Child Pages" namefield="name" type="readwrite">
			<fields>
				<field id="id" displaytype="TEXT" createable="false" editable="false" label="Page Id"/>
				<field id="name" displaytype="TEXT" label="Page Name" length="255" required="true"/>
				<field id="api_version" label="Skuid API Version" displaytype="TEXT"/>
				<field id="master_page_id" label="Master Page" displaytype="TEXT" createable="true" editable="true" accessible="true" filterable="true"/>
				<field id="created_at" label="Created At" displaytype="DATETIME"/>
				<field id="created_by_id" label="Created By" displaytype="TEXT" createable="false" editable="false"/>
				<field id="created_by.name" label="Created By" displaytype="TEXT" accessible="true" filterable="true"/>
				<field id="updated_at" label="Last Modified At" displaytype="DATETIME"/>
				<field id="updated_by_id" label="Last Modified By" displaytype="TEXT" createable="false" editable="false"/>
				<field id="updated_by.name" label="Last Modified By" displaytype="TEXT" accessible="true" filterable="true"/>
			</fields>
			<idfields>
				<field>id</field>
			</idfields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="masterPageId" state="filterableoff" inactive="true" name="masterPageId"/>
			</conditions>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/page?order=-updated_at&amp;fields=id,name,api_version,created_by_id,created_by.first_name,created_by.last_name,created_at,updated_by_id,updated_by.first_name,updated_by.last_name,updated_at&amp;where={master_page_id:&quot;{{masterPageId}}&quot;}"/>
				<method type="insert" verb="POST" successif="requestsucceeds" sendchanges="asjsoninbody" insertresponse="recordinbody" endpoint="/objects/page"/>
				<method type="update" verb="PATCH" successif="requestsucceeds" sendchanges="asjsoninbody" endpoint="/objects/page/{{{id}}}"/>
				<method type="delete" verb="DELETE" endpoint="/objects/page/{{{id}}}" successif="requestsucceeds"/>
			</methods>
			<actions/>
		</model>
		<model id="pagebuilder_TemplateSelector" query="true" createrowifnonefound="false" datasource="Ui-Only" processonclient="true">
			<fields>
				<field id="id" displaytype="TEXT"/>
				<field id="previewurl" displaytype="TEXT"/>
				<field id="name" displaytype="TEXT"/>
				<field id="description" displaytype="TEXT"/>
				<field id="def" displaytype="TEXT"/>
				<field id="templateprops" displaytype="OBJECT"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="pagebuilder_SelectedTemplate" query="true" createrowifnonefound="false" datasource="Ui-Only" processonclient="true">
			<fields>
				<field id="id" displaytype="TEXT"/>
				<field id="previewurl" displaytype="TEXT"/>
				<field id="name" displaytype="TEXT"/>
				<field id="description" displaytype="TEXT"/>
				<field id="def" displaytype="TEXT"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="pagebuilder_TemplateProps" query="true" createrowifnonefound="false" datasource="Ui-Only" processonclient="true">
			<fields>
				<field id="id" displaytype="TEXT" readonly="true"/>
				<field id="type" displaytype="TEXT" readonly="true"/>
				<field id="defaultvalue" displaytype="TEXT" readonly="true"/>
				<field id="description" displaytype="TEXT" readonly="true"/>
				<field id="value" displaytype="TEXT"/>
				<field id="modelprop" displaytype="TEXT"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="ClonePageData" limit="20" query="false" createrowifnonefound="false" datasource="SkuidLocal" type="readwrite" label="Page" labelplural="Pages" namefield="name">
			<fields>
				<field id="name" label="New Page Name" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="max_auto_saves" label="Max Auto Saves" displaytype="DOUBLE" precision="2" scale="0" accessible="true" filterable="true"/>
				<field id="theme_id" label="Theme Id" displaytype="TEXT" accessible="true" createable="true" filterable="true" ogdisplaytype="STRING" precision="0" scale="0" defaultvaluetype="fieldvalue"/>
				<field id="is_master_page" label="Is Master Page" displaytype="BOOLEAN" accessible="true" filterable="true" defaultvaluetype="fieldvalue"/>
				<field id="master_page_id" label="Master Page Id" displaytype="TEXT" accessible="true" createable="true" filterable="true"/>
				<field id="api_version" label="Skuid API Version" displaytype="TEXT"/>
				<field id="content" label="Content" displaytype="STRING" accessible="true" filterable="true"/>
				<field id="composer_settings" displaytype="TEXTAREA" ogdisplaytype="TEXT" label="Composer Settings"/>
			</fields>
			<conditions>
				<condition type="param" value="id" sourcetype="param" sourceparam="pageid" state="" inactive="false" operator="=" enclosevalueinquotes="true" novaluebehavior=""/>
			</conditions>
			<idfields>
				<field>id</field>
			</idfields>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/page/{{pageid}}"/>
				<method type="insert" verb="POST" successif="requestsucceeds" sendchanges="asjsoninbody" insertresponse="recordinbody" endpoint="/objects/page"/>
			</methods>
		</model>
	</models>
	<pageregioncontents>
		<pageregioncontent regionid="sk-1uFo3V-67" uniqueid="sk-1uLo4g-22" defaultcontent="true">
			<components>
				<wrapper uniqueid="sk-16mWai-212" cssclass="nx-pagebuilder">
					<components>
						<wrapper uniqueid="sk-1p24Mu-118" cssclass="nx-pagebuilder-title-main">
							<components>
								<pagetitle model="page" id="pageheader" cssclass="" uniqueid="sk-11WwZS-301">
									<actions>
										<action type="custom" label="{{$Label.Preview}}" icon="sk-icon-preview" snippet="pagepreview" uniqueid="sk-8AijA-290">
											<hotkeys>
												<hotkey modifiers="ctrl" key="p"/>
												<hotkey modifiers="meta" key="p"/>
											</hotkeys>
										</action>
										<action type="group" label="More Page Actions" icon="" usefirstitemasdefault="false" openonhover="false" uniqueid="sk-8AijC-293">
											<actions>
												<action type="multi" label="Child Pages" icon="sk-icon-hierarchy">
													<actions>
														<action type="blockUI" message="Loading Child Pages..."/>
														<action type="setCondition" model="pagebuilder_ChildPages" condition="masterPageId" value="{{{$Model.page.data.0.id}}}"/>
														<action type="requeryModel" model="pagebuilder_ChildPages" behavior="standard"/>
														<action type="showPopup">
															<popup title="Child Pages" width="90%">
																<components>
																	<skootable showconditions="true" showsavecancel="false" showerrorsinline="true" searchmethod="client" searchbox="true" showexportbuttons="false" pagesize="10" createrecords="false" model="pagebuilder_ChildPages" buttonposition="" mode="readonly" uniqueid="sk-2riMDg-198">
																		<fields>
																			<field id="name"/>
																			<field id="api_version" logictype="and" readonly="true"/>
																			<field type="COMBO" valuehalign="" allowordering="true" orderfield="updated_at" cssclass="fs-block">
																				<label>Last Modified</label>
																				<template>{{updated_at}} ({{updated_by.name}})</template>
																			</field>
																			<field type="COMBO" valuehalign="" allowordering="true" orderfield="created_at" cssclass="fs-block">
																				<label>Created</label>
																				<template>{{created_at}} ({{created_by.name}})</template>
																			</field>
																		</fields>
																		<rowactions>
																			<action type="redirect" label="Edit Page" icon="sk-icon-page-edit" window="blank" url="/ui/page/compose/{{{id}}}"/>
																			<action type="custom" label="Preview" icon="sk-icon-preview" snippet="skuid.pageBuilder.preview"/>
																		</rowactions>
																		<massactions usefirstitemasdefault="true"/>
																		<views>
																			<view type="standard"/>
																		</views>
																		<renderconditions logictype="and"/>
																		<actions defaultlabel="Global Actions" defaulticon="sk-icon-magic" usefirstitemasdefault="true">
																			<action type="multi" label="Create New Child Page" icon="sk-icon-add">
																				<actions>
																					<action type="cancel">
																						<models>
																							<model>pagebuilder_ChildPages</model>
																						</models>
																					</action>
																					<action type="createRow" model="pagebuilder_ChildPages" appendorprepend="prepend" defaultmodefornewitems="edit">
																						<defaults>
																							<default type="fieldvalue" field="master_page_id" enclosevalueinquotes="false" value="{{{$Model.page.data.0.id}}}"/>
																							<default type="fieldvalue" field="skuid__API_Version__c" enclosevalueinquotes="true" value="v1"/>
																						</defaults>
																					</action>
																					<action type="showPopup">
																						<popup title="New Child Page" width="90%">
																							<components>
																								<pagetitle uniqueid="sk-2xJssN-219" model="pagebuilder_ChildPages">
																									<maintitle>Create New Child Page</maintitle>
																									<actions>
																										<action type="multi" label="Create" window="self" rollbackonanyerror="false" icon="sk-icon-save">
																											<actions>
																												<action type="custom" rollbackonanyerror="false" snippet="skuid.pagebuilder.setChildPageXML">
																													<models>
																														<model>pagebuilder_ChildPages</model>
																													</models>
																													<onerroractions/>
																												</action>
																												<action type="save">
																													<onerroractions>
																														<action type="blockUI" message="There was an error saving the new Child Page" timeout="3000"/>
																													</onerroractions>
																													<models>
																														<model>pagebuilder_ChildPages</model>
																													</models>
																												</action>
																												<action type="closeTopmostPopup"/>
																												<action type="redirect" window="blank" url="/ui/page/compose/{{{id}}}"/>
																												<action type="requeryModels">
																													<models>
																														<model>pagebuilder_ChildPages</model>
																													</models>
																												</action>
																											</actions>
																										</action>
																										<action type="multi" label="Cancel" icon="sk-icon-cancel">
																											<actions>
																												<action type="cancel">
																													<models>
																														<model>pagebuilder_ChildPages</model>
																													</models>
																												</action>
																												<action type="closeTopmostPopup"/>
																											</actions>
																										</action>
																									</actions>
																								</pagetitle>
																								<basicfieldeditor showheader="true" showsavecancel="false" showerrorsinline="true" model="pagebuilder_ChildPages" buttonposition="" uniqueid="sk-2xJoRw-208" mode="edit" layout="above">
																									<columns layoutmode="responsive" columngutter="4px" rowgutter="4px">
																										<column behavior="flex" verticalalign="top" ratio="1" minwidth="300px">
																											<sections>
																												<section title="Child Page Details" collapsible="no" showheader="false">
																													<fields>
																														<field id="name" valuehalign="" type="" required="true"/>
																													</fields>
																												</section>
																											</sections>
																										</column>
																									</columns>
																									<conditions>
																										<condition type="contextrow" sourcetype="rowproperty" sourceproperty="rowid" operator="="/>
																									</conditions>
																									<renderconditions logictype="and"/>
																								</basicfieldeditor>
																							</components>
																						</popup>
																					</action>
																				</actions>
																			</action>
																		</actions>
																	</skootable>
																</components>
															</popup>
														</action>
														<action type="unblockUI"/>
													</actions>
													<renderconditions logictype="and">
														<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="false" fieldmodel="page" sourcetype="fieldvalue" field="is_master_page" value="true"/>
													</renderconditions>
													<enableconditions/>
												</action>
												<action type="multi" label="{{$Label.Clone}}" icon="sk-icon-clone">
													<actions>
														<action type="emptyModelData">
															<models>
																<model>ClonePageData</model>
															</models>
														</action>
														<action type="createRow" model="ClonePageData" appendorprepend="prepend" defaultmodefornewitems="edit" affectedrows="context">
															<defaults>
																<default type="fieldvalue" field="content" enclosevalueinquotes="true" value="{{$Model.page.data.0.content}}"/>
																<default type="fieldvalue" field="composer_settings" enclosevalueinquotes="true" value="{{$Model.page.data.0.composer_settings}}"/>
																<default type="fieldvalue" field="name" enclosevalueinquotes="true" value="{{$Model.page.data.0.name}}__clone"/>
																<default type="fieldvalue" field="max_auto_saves" enclosevalueinquotes="false" value="{{$Model.page.data.0.max_auto_saves}}"/>
																<default type="fieldvalue" field="is_master_page" value="{{$Model.page.data.0.is_master_page}}" enclosevalueinquotes="false"/>
																<default type="fieldvalue" field="master_page_id" value="{{{$Model.page.data.0.master_page_id}}}" operator="=" enclosevalueinquotes="false"/>
															</defaults>
														</action>
														<action type="unblockUI"/>
														<action type="showPopup">
															<popup title="{{$Label.Clone}} Page" width="50%">
																<components>
																	<pagetitle model="ClonePageData" uniqueid="sk-11BgBW-294">
																		<maintitle>{{$Label.Clone}} Page</maintitle>
																		<subtitle/>
																		<actions>
																			<action type="multi" label="Create Cloned Page" icon="sk-icon-save">
																				<actions>
																					<action type="blockUI" message="Creating page clone..."/>
																					<action type="save">
																						<models>
																							<model>ClonePageData</model>
																						</models>
																						<onerroractions>
																							<action type="blockUI" message="There was an error creating the page clone." timeout="2000"/>
																						</onerroractions>
																					</action>
																					<action type="closeTopmostPopup"/>
																					<action type="unblockUI" timeout="1500" message="Page cloned successfully! Opening Page Composer in separate window..."/>
																					<action type="showPopup" window="blank" url="/{{Id}}">
																						<popup title="{{$Label.Clone}} Page" width="50%">
																							<components>
																								<pagetitle uniqueid="sk-1rf6y--614" model="ClonePageData">
																									<maintitle>Cloning Finished</maintitle>
																									<actions/>
																								</pagetitle>
																								<pagetitle uniqueid="sk-1rdadh-260" model="ClonePageData">
																									<actions>
																										<action type="multi" label="Open Cloned Page" icon="sk-icon-table-edit">
																											<actions>
																												<action type="redirect" window="blank" url="/ui/page/compose/{{id}}"/>
																												<action type="closeAllPopups"/>
																											</actions>
																										</action>
																										<action type="multi" label="Stay Here" icon="sk-icon-close" secondary="true">
																											<actions>
																												<action type="closeAllPopups"/>
																											</actions>
																										</action>
																									</actions>
																								</pagetitle>
																							</components>
																						</popup>
																					</action>
																				</actions>
																			</action>
																			<action type="multi" label="{{$Label.Cancel}}" icon="sk-icon-cancel" secondary="true">
																				<actions>
																					<action type="emptyModelData">
																						<models>
																							<model>ClonePageData</model>
																						</models>
																					</action>
																					<action type="closeTopmostPopup"/>
																				</actions>
																			</action>
																		</actions>
																	</pagetitle>
																	<basicfieldeditor showsavecancel="false" showheader="true" model="ClonePageData" mode="edit" buttonposition="" layout="" uniqueid="sk-11BgBW-295">
																		<columns>
																			<column width="100%">
																				<sections>
																					<section title="New Page Information" collapsible="no">
																						<fields>
																							<field id="name"/>
																						</fields>
																					</section>
																				</sections>
																			</column>
																		</columns>
																	</basicfieldeditor>
																</components>
															</popup>
														</action>
													</actions>
													<renderconditions logictype="and"/>
													<enableconditions logictype="and"/>
												</action>
												<action type="multi" label="Download as XML file" icon="fa-arrow-down">
													<actions>
														<action type="custom" snippet="skuid.builder.downloadAsXMLFile"/>
													</actions>
												</action>
												<action type="delete" afterDelete="/ui/pages"/>
												<action type="popup" label="Revisions" icon="sk-icon-versions" uniqueid="sk-pagebuilder-button-versions">
													<popup title="Page Revisions" width="80%">
														<components>
															<skootable showconditions="true" showsavecancel="true" searchmethod="server" searchbox="true" showexportbuttons="false" pagesize="10" createrecords="false" model="versions" mode="read" uniqueid="sk-3x7HAP-408" searchconditionname="search">
																<fields>
																	<field id="description" columnwidth="35%"/>
																	<field id="api_version" readonly="true"/>
																	<field type="COMBO" valuehalign="" readonly="true" cssclass="fs-block">
																		<label>Created By</label>
																		<template>{{created_by.name}}, {{created_at}}</template>
																	</field>
																</fields>
																<rowactions>
																	<action type="custom" label="Restore this revision" snippet="restoreFromSavedVersion" icon="sk-icon-versions"/>
																	<action type="edit"/>
																	<action type="delete"/>
																</rowactions>
																<massactions usefirstitemasdefault="true">
																	<action type="massdelete"/>
																</massactions>
																<views>
																	<view type="standard"/>
																</views>
																<filters>
																	<filter type="toggle" filteroffoptionlabel="New Filter" createfilteroffoption="true" condition="IsAutoSave" label="Hide Auto-Saves">
																		<effects>
																			<effect action="activate" value="" condition="IsNotAutoSave"/>
																		</effects>
																	</filter>
																</filters>
																<actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
																	<action type="custom" label="Add new revision" icon="sk-icon-page-add" snippet="addSavedPageVersion"/>
																</actions>
															</skootable>
														</components>
													</popup>
													<hotkeys/>
													<renderconditions logictype="and"/>
													<enableconditions/>
												</action>
											</actions>
										</action>
										<action type="savecancel" uniqueid="sk-8AijF-296">
											<savehotkeys>
												<hotkey modifiers="ctrl" key="s"/>
												<hotkey modifiers="meta" key="s"/>
											</savehotkeys>
											<cancelhotkeys/>
										</action>
									</actions>
									<maintitle>{{$Label.Building_Page}} - {{name}}</maintitle>
								</pagetitle>
							</components>
							<styles>
								<styleitem type="background" bgtype="none"/>
								<styleitem type="size"/>
								<styleitem type="border"/>
							</styles>
						</wrapper>
						<pagebuilder id="pagebuilder" showheader="false" uniqueid="sk-8AijI-301"/>
					</components>
					<styles>
						<styleitem type="background"/>
						<styleitem type="border"/>
						<styleitem type="size"/>
					</styles>
				</wrapper>
			</components>
		</pageregioncontent>
	</pageregioncontents>
	<components/>
	<resources>
		<labels/>
		<javascript>
			<jsitem location="staticresource" name="AceEditor" namespace="skuid" filepath="ace.js"/>
			<jsitem location="inlinesnippet" name="skuid.pageBuilder.preview" cachelocation="false">var params = arguments[0],
                pagePreview = skuid.snippet.getSnippet('skuid.builder.page.preview');
                pagePreview &amp;&amp; pagePreview({
                model: params.model,
                row: params.item ? params.item.row : params.row
                });</jsitem>
			<jsitem location="inlinesnippet" name="ShowGrowlNotification_Saving" cachelocation="false">skuid.$.growlUI(skuid.$L('saving'));</jsitem>
			<jsitem location="inline" name="UtilSnippets" cachelocation="false" url="">(function(skuid){
                var $ = skuid.$;

                $(document.body).one('pageload',function(){
                var titles = $('.nx-pagebuilder-title-main');
                // Theres a weird bug where if you're editing the pagebuilder
                // with the pagebuilder, 2 titles will appear. So we just remove
                // the second one
                /*
                if(titles[1]){
                titles[1].remove();
                }
                */
                titles.prependTo('.nx-pagebuilder-toolbar-wrapper');
                });

                //  Set the new Child Page XML
                skuid.snippet.register('skuid.pagebuilder.setChildPageXML',function(config){
                var model = config.model,
                row = config.row,
                pageXML = '&lt;skuidpage unsavedchangeswarning="yes"&gt;' +
                '&lt;models/&gt;' +
                '&lt;pageregioncontents/&gt;' +
                '&lt;components/&gt;' + // Shouldn't be needed, but...
                '&lt;resources&gt;' +
                '&lt;labels/&gt;' +
                '&lt;css/&gt;' +
                '&lt;javascript/&gt;' +
                '&lt;/resources&gt;' +
                '&lt;/skuidpage&gt;';

                skuid.utils.writeXmlToPageLayoutFields(pageXML,model,row);
                });
                })(skuid);</jsitem>
			<jsitem location="inline" name="setDefaultsOnClonedRecord" url="">
                // When cloning Pages in protected modules,
                // we want to set the default Module to be '' instead.
                // Also, when the Owner.Name is 'Skuid',
                // we want to set the OwnerId to be the running user.
                $j().ready(function(){
                var model = skuid.model.getModel('PageData');

                if (model &amp;&amp; model.data.length) {
                var row = model.getFirstRow(),
                needToRedraw = false;
                //if (model.getFieldValue(row,'Owner.Name') == 'Skuid') {
                //    model.updateRow(row,'OwnerId',skuid.utils.userInfo.userId);
                //    model.updateRow(row,'Owner',{Name:skuid.utils.userInfo.name});
                //    needToRedraw = true;
                //}

                if (model.getFieldValue(row,'skuid__Module__c') == 'Skuid') {
                model.updateRow(row,'skuid__Module__c',null);
                needToRedraw = true;
                }

                // Now redraw our list, if necessary
                if (needToRedraw) {
                $j.each(model.registeredLists,function(listId,list){
                list.render({doNotCache:true});
                });
                }

                }
                });
            </jsitem>
		</javascript>
		<css>
			<cssitem location="inline" name="zindex" cachelocation="false">.sk-headerwrapper{
                z-index: 43;
                }</cssitem>
			<cssitem location="inline" name="message-container" cachelocation="false">.message-container &gt; .nx-editor-header {
                display: none;
                }

                .message-container &gt; .nx-messages:empty {
                display: none;
                }</cssitem>
		</css>
		<actionsequences uniqueid="sk-D28QH-494">
			<actionsequence id="d251ba35-0705-4ff3-b557-7b8f3c0d5de4" label="ChooseChildTemplate" type="reusable" uniqueid="sk-D28QH-495">
				<description/>
				<actions>
					<action type="showPopup" timeout="2000" message="Whoopee!!!">
						<popup title="Select a template" width="1000px">
							<components>
								<wizard deferstepcontentsrendering="false" buttonslocation="top" uniqueid="pagebuilder_templatewizard">
									<steps>
										<step stepid="ChooseTemplate" steplabel="">
											<components>
												<template multiple="true" uniqueid="sk-Rke10-1304" model="page" allowhtml="true">
													<contents>&lt;h1 style="text-align: center;"&gt;Select a template&lt;/h1&gt;</contents>
													<renderconditions logictype="and">
														<rendercondition fieldmodel="pagebuilder_TemplateProps" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasNoRows"/>
													</renderconditions>
													<conditions>
														<condition type="contextrow" field="Id" mergefield="Id" operator="="/>
													</conditions>
												</template>
												<deck searchmethod="server" searchbox="false" columngutter=".75em" rowgutter=".75em" model="pagebuilder_TemplateSelector" filtersposition="top" filterswidth="150px" showsavecancel="false" behavior="flex" verticalalign="top" ratio="1" minwidth="20%" uniqueid="sk-CwXSn-397" buttonposition="" pagesize="all" emptysearchbehavior="query">
													<components>
														<image source="url" uniqueid="sk-H4ulv-472" datasource="Ui-Only" behavior="none" model="pagebuilder_TemplateSelector" url="{{previewurl}}" alt="{{name}}">
															<styles>
																<styleitem type="itemsize" height="custom">
																	<styles>
																		<styleitem property="height" value="90px"/>
																	</styles>
																</styleitem>
																<styleitem type="border" margin="top,">
																	<styles>
																		<styleitem property="margin-top" value="16px"/>
																		<styleitem property="box-sizing" value="border-box"/>
																	</styles>
																</styleitem>
															</styles>
														</image>
														<template multiple="false" uniqueid="sk-D2-LE-649" model="pagebuilder_TemplateSelector" allowhtml="true">
															<contents>&lt;div style="text-align: center; margin-top:16px; font-size: 12pt; font-weight: bold;"&gt;{{{name}}}&lt;/div&gt;
                                                                &lt;p style="text-align: center;"&gt;{{{description}}}&lt;/p&gt;
                                                                &lt;br&gt;</contents>
														</template>
													</components>
													<massactions/>
													<interactions>
														<interaction type="tap" direction="either">
															<action type="branch" model="" label="No Props: Apply Template">
																<formula>{{templateprops}} = null</formula>
																<iftrueactions>
																	<action type="custom" snippet="ComponentAcceptor.applySelectedTemplate">
																		<models/>
																		<popup title="{{Model.label}}: {{Name}}" width="80%">
																			<components/>
																		</popup>
																	</action>
																	<action type="action-sequence" action-sequence-id="d51c76ac-3021-4d84-9d4d-66d6df3885e2"/>
																</iftrueactions>
															</action>
															<action type="branch" label="Configure Props">
																<formula>{{templateprops}} != null</formula>
																<iftrueactions>
																	<action type="custom" snippet="ComponentAcceptor.configSelectedTemplate"/>
																	<action type="emptyModelData" model="pgs__NewPage" affectedrows="context">
																		<models>
																			<model>pagebuilder_SelectedTemplate</model>
																		</models>
																	</action>
																	<action type="createRow" model="pagebuilder_SelectedTemplate" appendorprepend="prepend" defaultmodefornewitems="edit" affectedrows="context">
																		<defaults>
																			<default type="fieldvalue" field="def" enclosevalueinquotes="true" value="{{def}}"/>
																			<default type="fieldvalue" field="description" enclosevalueinquotes="true" value="{{description}}"/>
																			<default type="fieldvalue" field="name" enclosevalueinquotes="true" value="{{name}}"/>
																			<default type="fieldvalue" field="previewurl" enclosevalueinquotes="true" value="{{previewurl}}"/>
																			<default type="fieldvalue" field="id" enclosevalueinquotes="true" value="{{id}}"/>
																		</defaults>
																	</action>
																	<action type="save">
																		<models>
																			<model>pagebuilder_SelectedTemplate</model>
																		</models>
																	</action>
																</iftrueactions>
															</action>
														</interaction>
													</interactions>
													<styles>
														<styleitem type="border"/>
														<styleitem property="cursor" value="pointer"/>
													</styles>
													<renderconditions logictype="and"/>
													<conditions/>
												</deck>
											</components>
											<actions>
												<action type="multi" label="Cancel" stepid="step1" uniqueid="sk-Rsir1-559" window="self" secondary="true" icon="sk-icon-cancel">
													<actions>
														<action type="action-sequence" action-sequence-id="d51c76ac-3021-4d84-9d4d-66d6df3885e2"/>
													</actions>
												</action>
											</actions>
										</step>
										<step stepid="ConfigProps" steplabel="">
											<components>
												<deck searchmethod="server" searchbox="false" columngutter=".75em" rowgutter=".75em" model="pagebuilder_SelectedTemplate" filtersposition="top" filterswidth="150px" showsavecancel="false" behavior="flex" verticalalign="top" ratio="1" minwidth="400px" uniqueid="sk-CwXSn-397" buttonposition="" pagesize="all" emptysearchbehavior="query">
													<components>
														<image source="url" uniqueid="sk-H4ulv-472" datasource="Ui-Only" behavior="none" model="pagebuilder_TemplateSelector" url="{{previewurl}}" alt="{{name}}">
															<styles>
																<styleitem type="itemsize" height="custom">
																	<styles>
																		<styleitem property="height" value="90px"/>
																	</styles>
																</styleitem>
																<styleitem type="border" margin="top,">
																	<styles>
																		<styleitem property="margin-top" value="16px"/>
																		<styleitem property="box-sizing" value="border-box"/>
																	</styles>
																</styleitem>
															</styles>
														</image>
														<template multiple="false" uniqueid="sk-D2-LE-649" model="pagebuilder_TemplateSelector" allowhtml="true">
															<contents>&lt;div style="text-align: center; margin-top:16px; font-size: 12pt; font-weight: bold;"&gt;{{{name}}}&lt;/div&gt;
                                                                &lt;p style="text-align: center;"&gt;{{{description}}}&lt;/p&gt;
                                                                &lt;br&gt;</contents>
														</template>
													</components>
													<massactions/>
													<interactions/>
													<styles>
														<styleitem type="border"/>
													</styles>
													<renderconditions logictype="and"/>
													<conditions/>
												</deck>
												<basicfieldeditor showheader="true" showsavecancel="false" showerrorsinline="true" model="pagebuilder_TemplateProps" buttonposition="" uniqueid="sk-RjCTk-951" mode="edit" layout="above">
													<columns layoutmode="fixed">
														<column width="100%">
															<sections>
																<section title="Section A" collapsible="no" showheader="false">
																	<fields>
																		<field uniqueid="sk-RjRzs-1031" id="value" valuehalign="" type="CUSTOM" snippet="ComponentAcceptor.templatePropRenderer">
																			<label>{{description}}</label>
																		</field>
																	</fields>
																</section>
															</sections>
														</column>
													</columns>
													<renderconditions logictype="and"/>
												</basicfieldeditor>
											</components>
											<actions>
												<action type="multi" label="Cancel" uniqueid="sk-RjmWM-1124" secondary="true" icon="sk-icon-cancel">
													<actions>
														<action type="action-sequence" action-sequence-id="d51c76ac-3021-4d84-9d4d-66d6df3885e2"/>
													</actions>
													<renderconditions logictype="and"/>
													<enableconditions/>
												</action>
												<action type="multi" label="Choose Another Template" secondary="true" icon="sk-icon-arrow-left" uniqueid="sk-Rtgb4-466">
													<renderconditions logictype="and"/>
													<actions>
														<action type="navigateToStep" stepid="ChooseTemplate"/>
													</actions>
													<enableconditions/>
												</action>
												<action type="multi" label="Apply Selected Template" uniqueid="sk-Rjiel-1069" icon="sk-icon-save">
													<actions>
														<action type="custom" snippet="ComponentAcceptor.applySelectedTemplate"/>
														<action type="action-sequence" action-sequence-id="d51c76ac-3021-4d84-9d4d-66d6df3885e2"/>
													</actions>
													<renderconditions logictype="and"/>
													<enableconditions/>
												</action>
											</actions>
										</step>
									</steps>
								</wizard>
							</components>
						</popup>
					</action>
				</actions>
			</actionsequence>
			<actionsequence id="d51c76ac-3021-4d84-9d4d-66d6df3885e2" label="CloseChildTemplateSelector" type="reusable" uniqueid="sk-T-YSD-522">
				<description/>
				<actions>
					<action type="emptyModelData">
						<models>
							<model>pagebuilder_TemplateSelector</model>
							<model>pagebuilder_TemplateProps</model>
						</models>
					</action>
					<action type="closeTopmostPopup"/>
				</actions>
			</actionsequence>
		</actionsequences>
	</resources>
</skuidpage>

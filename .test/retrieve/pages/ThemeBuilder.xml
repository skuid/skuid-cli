<skuidpage unsavedchangeswarning="yes" hideeditbutton="true" title="Theme{{#$Model.Theme.data}}: {{name}}{{/$Model.Theme.data}}">
	<models>
		<model id="Theme" limit="" query="true" label="Theme" labelPlural="Themes" datasource="SkuidLocal" datasourcetype="REST" type="readwrite" doclone="" orderby="name" processonclient="true">
			<fields>
				<field id="name"/>
				<field id="type"/>
				<field id="id" label="Id" displaytype="TEXT" readonly="true" accessible="true" filterable="true"/>
				<field id="version_date" label="Version Date" displaytype="TEXT" length="255" accessible="true" filterable="true"/>
			</fields>
			<conditions>
				<condition type="param" enclosevalueinquotes="true" operator="=" field="Id" value="id" sourceparam="Id" sourcetype="param"/>
			</conditions>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/theme/{{Id}}"/>
				<method type="update" verb="PUT" successif="requestsucceeds" sendchanges="asjsoninbody" insertresponse="recordinbody" endpoint="/objects/theme/{{id}}"/>
			</methods>
		</model>
		<model id="ThemeResource" limit="" query="true" label="Theme" labelPlural="Themes" datasource="SkuidLocal" datasourcetype="REST" type="" doclone="" orderby="name" processonclient="true" verb="GET" endpoint="/objects/theme/{{Id}}">
			<fields>
				<field id="name"/>
				<field id="type"/>
				<field id="id" label="Id" displaytype="TEXT" readonly="true" accessible="true" filterable="true"/>
				<field id="version_date" label="Version Date" displaytype="TEXT" length="255" accessible="true" filterable="true"/>
			</fields>
			<conditions>
				<condition type="param" operator="=" field="Id" value="id" novaluebehavior="deactivate" mergefield="id" sourceparam="Id" sourcetype="param" enclosevalueinquotes="true"/>
			</conditions>
			<actions/>
		</model>
		<model id="PreviewPage" query="true" createrowifnonefound="true" datasourcetype="Ui-Only" datasource="Ui-Only" processonclient="true">
			<fields>
				<field id="PreviewPage" displaytype="TEXT" label="Preview Page"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="Page" limit="20" query="false" createrowifnonefound="false" datasourcetype="REST" datasource="SkuidLocal" type="readwrite">
			<fields>
				<field id="id" label="Id" displaytype="TEXT" readonly="true" accessible="true" filterable="true"/>
				<field id="name" label="Name" displaytype="TEXT" accessible="true" filterable="true"/>
				<field id="pageid" displaytype="TEXT" label="Page ID"/>
			</fields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" sourcetype="param" sourceparam="id" state="filterableoff" inactive="true" name="id"/>
			</conditions>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/page"/>
			</methods>
		</model>
	</models>
	<pageregioncontents>
		<pageregioncontent regionid="sk-1uFo3V-67" uniqueid="sk-Ce2Pn-57">
			<components>
				<themecomposer/>
				<pagetitle model="Theme" cssclass="" uniqueid="tb-buttons">
					<actions>
						<action type="multi" icon="sk-icon-clone" label="{{$Label.Clone}}" cssclass="tb-title-button">
							<actions>
								<action type="custom" snippet="z99"/>
								<action type="emptyModelData">
									<models>
										<model>ThemeClone</model>
									</models>
								</action>
								<action type="createRow" model="ThemeClone" appendorprepend="prepend" defaultmodefornewitems="edit">
									<defaults>
										<default type="fieldvalue" field="Name" enclosevalueinquotes="true" value="{{$Model.Theme.data.0.Name}} (Clone)"/>
										<default type="fieldvalue" field="skuid__Resource_Name__c" enclosevalueinquotes="true" value="{{$Model.Theme.data.0.skuid__Resource_Name__c}}_Clone"/>
										<default type="fieldvalue" field="skuid__Resource_Namespace__c" enclosevalueinquotes="true" value="{{$Model.Theme.data.0.skuid__Resource_Namespace__c}}"/>
										<default type="fieldvalue" value="{{$Model.Theme.data.0.skuid__Type__c}}" field="skuid__Type__c" enclosevalueinquotes="true"/>
										<default type="fieldvalue" field="skuid__Active__c" enclosevalueinquotes="false"/>
										<default type="fieldvalue" field="skuid__Skuid_Version_Date__c" enclosevalueinquotes="true" value="{{$Model.Theme.data.0.skuid__Skuid_Version_Date__c}}"/>
									</defaults>
								</action>
								<action type="showPopup">
									<popup title="Clone Theme" width="50%">
										<components>
											<pagetitle model="ThemeClone" uniqueid="sk-7xGOm-427">
												<maintitle>Clone Theme</maintitle>
												<subtitle>
													<template>{{Model.label}}</template>
												</subtitle>
												<actions>
													<action type="multi" rollbackonanyerror="true" icon="sk-icon-save" label="Save">
														<actions>
															<action type="save">
																<models>
																	<model>ThemeClone</model>
																</models>
															</action>
															<action type="custom" snippet="skuid.themeBuilder.clone">
																<onerroractions>
																	<action type="closeAllPopups" message="There was an error" timeout="3000"/>
																	<action type="blockUI" message="Unable to create static resource (one with this name may already exist)" timeout="2000"/>
																	<action type="markRowsForDeletion" message="There was an error" timeout="3000" model="ThemeClone"/>
																	<action type="save" message="There was an error" timeout="3000">
																		<onerroractions/>
																		<models>
																			<model>ThemeClone</model>
																		</models>
																	</action>
																</onerroractions>
															</action>
															<action type="closeAllPopups"/>
															<action type="showPopup">
																<popup title="Clone Theme" width="50%">
																	<components>
																		<pagetitle uniqueid="sk-1rxnJt-243" model="ThemeClone">
																			<maintitle>Cloning Fininshed</maintitle>
																			<subtitle>
																				<template>{{Model.label}}</template>
																			</subtitle>
																			<actions/>
																		</pagetitle>
																		<pagetitle uniqueid="sk-1rxrZC-255" model="ThemeClone">
																			<actions>
																				<action type="multi" label="Open Theme" icon="sk-icon-table-edit">
																					<actions>
																						<action type="redirect" window="blank" url="/apex/skuid__EditTheme?id={{{$Model.ThemeClone.data.0.id}}}"/>
																						<action type="closeAllPopups"/>
																					</actions>
																				</action>
																				<action type="multi" label="Stay Here" secondary="true" icon="sk-icon-cancel">
																					<actions>
																						<action type="closeAllPopups"/>
																					</actions>
																				</action>
																			</actions>
																		</pagetitle>
																	</components>
																</popup>
															</action>
														</actions>
													</action>
													<action type="multi" icon="sk-icon-cancel" label="Cancel" window="self" secondary="true">
														<hotkeys/>
														<actions>
															<action type="cancel">
																<models>
																	<model>ThemeClone</model>
																</models>
															</action>
															<action type="closeTopmostPopup"/>
														</actions>
													</action>
												</actions>
											</pagetitle>
											<basicfieldeditor showheader="true" showsavecancel="false" showerrorsinline="true" model="ThemeClone" buttonposition="" uniqueid="sk-7xB19-398" mode="edit">
												<columns>
													<column width="100%">
														<sections>
															<section title="Theme Properties" collapsible="no">
																<fields>
																	<field id="Name" valuehalign="" type="" required="true"/>
																	<field id="skuid__Resource_Name__c" valuehalign="" type=""/>
																	<field id="skuid__Active__c"/>
																</fields>
															</section>
														</sections>
													</column>
												</columns>
											</basicfieldeditor>
										</components>
									</popup>
								</action>
							</actions>
						</action>
						<action type="multi" label="{{$Label.Preview}}" uniqueid="tb-button-preview" icon="sk-icon-photoview" cssclass="tb-title-button" snippet="skuid.pageList.previewPage">
							<actions>
								<action type="custom" snippet="z99"/>
								<action type="emptyModelData">
									<models>
										<model>PreviewPage</model>
									</models>
								</action>
								<action type="createRow" model="PreviewPage" appendorprepend="prepend" defaultmodefornewitems="edit"/>
								<action type="showPopup">
									<popup title="Preview Theme" width="50%">
										<components>
											<pagetitle uniqueid="1425600897111-939" model="PreviewPage">
												<actions>
													<action type="multi" label="Preview" icon="sk-icon-photoview">
														<actions>
															<action type="createRow" model="Page" appendorprepend="prepend" defaultmodefornewitems="edit">
																<defaults/>
															</action>
															<action type="updateRow" fieldmodel="Page" field="id" enclosevalueinquotes="false" value="{{{$Model.PreviewPage.data.0.PreviewPage}}}"/>
															<action type="custom" snippet="previewPage"/>
															<action type="closeTopmostPopup"/>
														</actions>
													</action>
												</actions>
												<maintitle>Select a Page to use for previewing this Theme</maintitle>
											</pagetitle>
											<basicfieldeditor showheader="true" showsavecancel="false" model="PreviewPage" buttonposition="" uniqueid="1425599342195-276" mode="edit" layout="">
												<columns>
													<column width="100%">
														<sections>
															<section title="Section A" collapsible="no" showheader="false">
																<fields>
																	<field id="PreviewPage" valuehalign="" type=""/>
																</fields>
															</section>
														</sections>
													</column>
												</columns>
											</basicfieldeditor>
										</components>
									</popup>
								</action>
							</actions>
							<hotkeys>
								<hotkey modifiers="ctrl" key="p"/>
								<hotkey modifiers="meta" key="p"/>
							</hotkeys>
						</action>
						<action type="multi" label="{{$Label.Save}}" icon="sk-icon-save" uniqueid="tb-button-save" cssclass="tb-title-button">
							<hotkeys>
								<hotkey modifiers="ctrl" key="s"/>
								<hotkey modifiers="meta" key="s"/>
							</hotkeys>
							<actions>
								<action type="publish" event="skuid.themeBuilder.save">
									<popup title="Edit Theme raw files" width="90%">
										<components>
											<pagetitle model="ThemeResource">
												<maintitle>Edit Theme Files</maintitle>
												<subtitle>
													<template>{{Model.label}}</template>
												</subtitle>
												<actions>
													<action type="multi" label="Cancel">
														<actions>
															<action type="closeTopmostPopup"/>
														</actions>
													</action>
													<action type="multi" label="Save Theme">
														<actions>
															<action type="publish" event="skuid.themeBuilder.save"/>
															<action type="closeTopmostPopup"/>
														</actions>
													</action>
												</actions>
											</pagetitle>
											<tabset rememberlastusertab="true" defertabrendering="true" renderas="">
												<tabs>
													<tab name="Theme Definition">
														<components>
															<custom name="themedefinitionrawedit"/>
														</components>
													</tab>
													<tab name="Theme CSS" loadlazypanels="true">
														<components>
															<custom name="themecssrawedit"/>
														</components>
													</tab>
												</tabs>
											</tabset>
										</components>
									</popup>
								</action>
							</actions>
						</action>
						<action type="multi" label="{{$Label.Cancel}}" window="self" icon="sk-icon-cancel" uniqueid="tb-button-cancel" cssclass="tb-title-button">
							<actions>
								<action type="publish" event="skuid.themeBuilder.cancel" snippet="skuid.themeBuilder.cancel">
									<models>
										<model>Theme</model>
									</models>
								</action>
							</actions>
							<hotkeys/>
						</action>
					</actions>
					<maintitle>Editing Theme: {{name}}</maintitle>
					<renderconditions logictype="and"/>
				</pagetitle>
				<wrapper uniqueid="tb-wrapper">
					<components>
						<panelset type="standard" uniqueid="1425337927715-490" scroll="">
							<panels>
								<panel type="left" width="124px">
									<components>
										<template multiple="false" uniqueid="sk-SviH_-223" allowhtml="true">
											<contents>&lt;div id="tb-nav"&gt;
                                                &lt;ul&gt;
                                                &lt;li pane-label="Global"tab-id="tb-preview-global"&gt;Global&lt;/li&gt;
                                                &lt;li pane-label="PageTitle"tab-id="tb-preview-title"&gt;Page Title&lt;/li&gt;
                                                &lt;li pane-label="Table"tab-id="tb-preview-table"&gt;Table&lt;/li&gt;
                                                &lt;li pane-label="Buttons"tab-id="tb-preview-buttons"&gt;Buttons&lt;/li&gt;
                                                &lt;li pane-label="ActionSelect"tab-id="tb-preview-actionselect"&gt;Actions/Filters&lt;/li&gt;
                                                &lt;li pane-label="FieldEditor"tab-id="tb-preview-field"&gt;Field Editor&lt;/li&gt;
                                                &lt;li pane-label="Queue"tab-id="tb-preview-queue"&gt;Queue&lt;/li&gt;
                                                &lt;li pane-label="Tabset"tab-id="tb-preview-tab"&gt;Tab Set&lt;/li&gt;
                                                &lt;li pane-label="Calendar"tab-id="tb-preview-calendar"&gt;Calendar&lt;/li&gt;
                                                &lt;li pane-label="File"tab-id="tb-preview-file"&gt;File&lt;/li&gt;
                                                &lt;li pane-label="Popup"tab-id="tb-preview-popup"&gt;Popup&lt;/li&gt;
                                                &lt;li pane-label="Wizard" tab-id="tb-preview-wizard"&gt;Wizard&lt;/li&gt;
                                                &lt;li pane-label="Navigation" tab-id="tb-preview-navigation"&gt;Navigation&lt;/li&gt;
                                                &lt;li pane-label="Search" tab-id="tb-preview-search"&gt;Search&lt;/li&gt;
                                                &lt;li pane-label="Charts" tab-id="tb-preview-charts"&gt;Charts&lt;/li&gt;
                                                &lt;li pane-label="Deck" tab-id="tb-preview-deck"&gt;Deck&lt;/li&gt;
                                                &lt;li pane-label="WebFonts" tab-id="tb-preview-webfonts"&gt;Web Fonts&lt;/li&gt;
                                                &lt;li pane-label="CSS" tab-id="tb-preview-css"&gt;CSS&lt;/li&gt;
                                                &lt;/ul&gt;
                                                &lt;/div&gt;</contents>
											<renderconditions logictype="and">
												<rendercondition type="fieldvalue" fieldmodel="Theme" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" sourceparam="type" enclosevalueinquotes="true" sourceproperty="hasRows" operator="=" field="type" value="Desktop"/>
											</renderconditions>
										</template>
									</components>
								</panel>
								<panel uniqueid="tb-preview" cssclass="">
									<components/>
								</panel>
							</panels>
							<renderconditions logictype="and"/>
						</panelset>
						<panelset type="standard" uniqueid="sk-8cHMu-139" scroll="" cssclass="tb-preview ">
							<panels>
								<panel type="right" width="280px">
									<components/>
								</panel>
								<panel>
									<components>
										<template multiple="false" uniqueid="sk-8cKat-151" model="">
											<contents>&lt;iframe id="tb-iframe" class="display-none" width="100%", height="100%" src="/ui/pages/ThemeBuilderDesktop_IFRAME"/&gt;</contents>
											<renderconditions logictype="and"/>
										</template>
									</components>
								</panel>
							</panels>
							<renderconditions logictype="and">
								<rendercondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="Theme" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" sourceparam="type" value="Desktop" field="type"/>
							</renderconditions>
						</panelset>
						<template multiple="false" model="" uniqueid="1425332052275-326" allowhtml="false">
							<contents>&lt;div id="tb-holder" class="tb"&gt;&lt;/div&gt;</contents>
						</template>
					</components>
					<styles>
						<styleitem type="background"/>
						<styleitem type="border"/>
						<styleitem type="size"/>
						<styleitem property="position" value="relative"/>
					</styles>
					<renderconditions logictype="and"/>
				</wrapper>
			</components>
		</pageregioncontent>
	</pageregioncontents>
	<components/>
	<resources>
		<labels>
			<label id="Preview"/>
			<label id="Clone"/>
			<label id="Save"/>
			<label id="Cancel"/>
		</labels>
		<css>
			<cssitem location="inline" name="extra" cachelocation="false">.tb-preview iframe{
    overflow-x: hidden;
    border: none;
}
.tb-iframe-mobile{
    margin-left: 124px;
    border: none;
}
.nx-editor-contents{
    margin: 0;
}
/*.nx-page{*/
/*    padding: 0 !important;*/
/*}*/
.nx-panel{
    min-height: 0px;
}

.tb-iframe-mobile {
    margin-left: 129px;
}
.sk-headerwrapper{
    z-index: 202;
}</cssitem>
		</css>
		<javascript>
			<jsitem location="staticresource" name="AceEditor" namespace="skuid" filepath="ace.js"/>
			<jsitem location="inline" name="Snippets" cachelocation="false" url="">(function(skuid){

    var $ = skuid.$,
    registerSnippet = skuid.snippet.registerSnippet;
    
    // Utility functions for changing z-index
    registerSnippet('z99',function(){
        $('#tb-holder').addClass('z99');
        $('#tb-nav').addClass('z99');
    });
    
    registerSnippet('removeZ99',function(){
        $('#tb-holder').removeClass('z99');
        $('#tb-nav').removeClass('z99');
    });
    
    // Preview page
    registerSnippet('previewPage',function(){
        var params = arguments[0],
        pagePreview = skuid.snippet.get('skuid.builder.page.preview'),
        pageModel = skuid.$M('Page'),
        pageRow = pageModel.getFirstRow();
        // pageModel.adoptRow(pageRow);
        
        pagePreview &amp;&amp; pagePreview({
            model: pageModel,
            row: pageRow,
            // Specify that we want to preview in context of a particular theme
            params: {
                usetheme: skuid.$M('Theme').data[0].name
            }
        });
    });

})(skuid);</jsitem>
			<jsitem location="inline" name="iframeResizer" cachelocation="false" url="">(function(skuid){
var $ = skuid.$;
$(document.body).one('pageload', function(){
    $('#tb-iframe').css('height', window.innerHeight-128 + 'px');
    $('#tb-holder').css('height', window.innerHeight-110 + 'px');
});
$( window ).resize(function() {
    $('#tb-iframe').css('height', window.innerHeight-128 + 'px');
    $('#tb-holder').css('height', window.innerHeight-110 + 'px');
});
})(skuid);</jsitem>
			<jsitem location="staticresource" namespace="skuid" filepath="js/lib/less.js"/>
		</javascript>
	</resources>
</skuidpage>

<skuid__page unsavedchangeswarning="yes">
	<models>
		<model id="Login_UI" limit="20" query="false" createrowifnonefound="true" datasource="SkuidLocal" type="readwrite" unloadwarningifunsavedchanges="false">
			<fields>
				<field id="username" displaytype="TEXT" label="Username"/>
				<field id="redirect" displaytype="TEXT" label="Redirect"/>
			</fields>
			<conditions/>
			<actions/>
			<methods>
				<method type="query" verb="GET" endpoint="/objects/page" payloadcontenttype="JSON"/>
				<method type="insert" verb="POST" successif="responsefieldistrue" sendchanges="asformdatainbody" insertresponse="recordinbody" endpoint="/auth/resetpassword?next={{#encodeUrl}}{{$Param.next}}{{/encodeUrl}}" successfield="success"/>
			</methods>
		</model>
		<model id="UI" query="true" datasource="Ui-Only" createrowifnonefound="true">
			<fields>
				<field id="resetStatus" displaytype="PICKLIST" length="255" ogdisplaytype="TEXT" defaultvaluetype="fieldvalue" picklistsource="manual" returntype="TEXT">
					<picklistentries>
						<entry value="complete" label="complete"/>
						<entry value="lockedOut" label="lockedOut"/>
						<entry value="inProgress" label="inProgress"/>
					</picklistentries>
				</field>
			</fields>
			<conditions/>
			<actions/>
		</model>
	</models>
	<pageregioncontents>
		<pageregioncontent regionid="sk-1fq-2169" uniqueid="sk-6-M-1492">
			<components>
				<skuid__wrapper uniqueid="sk-1hu-3953" overflowY="hidden" height="custom" heightCustom="128px" heightStrategy="fixed">
					<components/>
					<styles>
						<spacing/>
					</styles>
					<background/>
				</skuid__wrapper>
				<skuid__grid uniqueid="sk-1iW-5188" flexDirection="row" justifyContent="space-around" alignItems="flex-start">
					<divisions>
						<division alignSelf="auto" minWidth="384px" ratio="0" maxWidth="384px">
							<components>
								<skuid__wrapper uniqueid="sk-2x1v-6440">
									<components>
										<skuid__grid uniqueid="sk-1ks-6227" flexDirection="row" justifyContent="space-around" alignItems="center">
											<divisions>
												<division ratio="0" alignSelf="auto">
													<components>
														<skuid__image source="url" uniqueid="sk-1il-6825" datasource="SkuidLocal" model="Login_UI" url="/api/v1/site/logo/large" imageHeight="64px" imageWidth="auto">
															<styles>
																<spacing/>
															</styles>
															<renderConditions logictype="and"/>
															<styleVariantConditions/>
														</skuid__image>
													</components>
												</division>
											</divisions>
											<styles>
												<spacing bottom="4"/>
											</styles>
										</skuid__grid>
										<skuid__wrapper uniqueid="public-main-wrapper" styleSettingsVariant="c5a44cb4-0fb9-4631-a576-a20f998816e0">
											<components>
												<skuid__wrapper uniqueid="sk-1UgV-24049">
													<components>
														<skuid__text contents="&lt;div style=&quot;text-align: center;&quot;&gt;This account has been locked&lt;/div&gt;&#10;" uniqueid="sk-1UgX-24476" styleSettingsVariant="53193c74-b77c-429e-8fed-09b73deaa10c">
															<styles>
																<spacing bottom="2" styleSettingsVariant="53193c74-b77c-429e-8fed-09b73deaa10c"/>
															</styles>
														</skuid__text>
														<skuid__text contents="For security reasons, we have to lock an account after five failed login attempts.&lt;br /&gt;&#10;&lt;br /&gt;&#10;Please contact a site administrator to reverse this." uniqueid="sk-1UgX-24792">
															<styles>
																<spacing/>
															</styles>
														</skuid__text>
													</components>
													<styles>
														<spacing/>
													</styles>
													<background/>
													<renderConditions logictype="and">
														<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="resetStatus" value="lockedOut"/>
													</renderConditions>
													<styleVariantConditions/>
												</skuid__wrapper>
												<skuid__wrapper uniqueid="sk-348-33666">
													<components>
														<skuid__text contents="&lt;div style=&quot;text-align: center;&quot;&gt;Reset your password&lt;/div&gt;&#10;" uniqueid="sk-1kT-7091" styleSettingsVariant="53193c74-b77c-429e-8fed-09b73deaa10c">
															<styles>
																<spacing bottom="2" styleSettingsVariant="53193c74-b77c-429e-8fed-09b73deaa10c"/>
															</styles>
														</skuid__text>
														<skuid__wrapper uniqueid="sk-7y1-5358">
															<components>
																<skuid__text contents="&lt;div&gt;Enter the username&amp;nbsp;associated with your account, and we&amp;rsquo;ll email a link to reset your password.&lt;/div&gt;&#10;" uniqueid="sk-73u-17542">
																	<styles>
																		<spacing bottom="3"/>
																	</styles>
																</skuid__text>
																<skuid__text contents="Username" uniqueid="sk-1o--26828" styleSettingsVariant="bcf356fb-cd9b-4b49-adb6-299b154f243f"/>
																<skuid__form showErrorsInline="true" model="Login_UI" uniqueid="username-form" mode="edit" styleSettingsVariant="3815a36b-52d9-4fa2-a3b9-bf4ec881a44f">
																	<columns>
																		<column verticalAlign="top" ratio="1">
																			<sections>
																				<section title="New Section" showHeading="false">
																					<fields>
																						<skuid__field id="username" uniqueId="password-reset-username-input" label=" "/>
																					</fields>
																				</section>
																			</sections>
																		</column>
																	</columns>
																</skuid__form>
																<skuid__buttonSet uniqueid="sk-1pL-29379" expandToFill="true">
																	<groups>
																		<skuid__buttonGroup uniqueId="sk-1pL-29377" displayType="detached">
																			<buttons>
																				<skuid__button label="Request password reset link" uniqueId="reset-password-button" styleSettingsVariant="a8573762-83d9-40e1-bd77-e89a20e4c021">
																					<actions>
																						<action type="updateRow" fieldmodel="UI" affectedrows="context">
																							<updates>
																								<update valuesource="fieldvalue" field="resetStatus" enclosevalueinquotes="true" value="inProgress"/>
																							</updates>
																						</action>
																						<action type="save">
																							<models>
																								<model>Login_UI</model>
																							</models>
																							<onerroractions>
																								<action type="branch" whenfinished="stop">
																									<formula>CONTAINS({{messages.0.message}}, "Contact admin to unlock your account")</formula>
																									<iftrueactions>
																										<action type="updateRow" fieldmodel="UI" affectedrows="context">
																											<updates>
																												<update valuesource="fieldvalue" field="resetStatus" enclosevalueinquotes="true" value="lockedOut"/>
																											</updates>
																										</action>
																									</iftrueactions>
																								</action>
																							</onerroractions>
																						</action>
																						<action type="updateRow" fieldmodel="UI" affectedrows="context">
																							<updates>
																								<update valuesource="fieldvalue" field="resetStatus" enclosevalueinquotes="true" value="complete"/>
																							</updates>
																						</action>
																					</actions>
																					<renderConditions logictype="and">
																						<renderCondition type="fieldvalue" operator="!=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="resetStatus" value="inProgress"/>
																					</renderConditions>
																					<enableConditions logictype="and">
																						<condition type="blank" fieldmodel="Login_UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" sourceproperty="isNew" operator="!=" field="username" fieldtargetobjects="SkuidLocal" value="null" enclosevalueinquotes="false"/>
																					</enableConditions>
																					<styleVariantConditions/>
																					<hotkeys>
																						<hotkey key="return" ignoretextinputs="false"/>
																					</hotkeys>
																				</skuid__button>
																				<skuid__button label="Requesting..." uniqueId="sk-1Uku-34172" styleSettingsVariant="a8573762-83d9-40e1-bd77-e89a20e4c021">
																					<renderConditions logictype="and">
																						<renderCondition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="resetStatus" value="inProgress"/>
																					</renderConditions>
																					<enableConditions logictype="and">
																						<condition type="fieldvalue" operator="=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="skipandnorender"/>
																					</enableConditions>
																					<styleVariantConditions/>
																				</skuid__button>
																			</buttons>
																		</skuid__buttonGroup>
																	</groups>
																	<styles>
																		<spacing top="2" bottom="2"/>
																	</styles>
																	<renderConditions logictype="and"/>
																	<styleVariantConditions/>
																</skuid__buttonSet>
															</components>
															<styles>
																<spacing/>
															</styles>
															<background/>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="!=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="resetStatus" value="complete"/>
															</renderConditions>
															<styleVariantConditions/>
														</skuid__wrapper>
														<skuid__messageArea model="UI" uniqueid="sk-7yR-10343">
															<group>
																<skuid__messageBlock model="UI" title="Reset password request received!" description="If that username exists, we'll send a reset link to the associated email address momentarily." allowHTML="false" styleSettingsVariant="successStrong" icon="sk-webicon-ink:check-in-circle">
																	<renderConditions logictype="and"/>
																</skuid__messageBlock>
															</group>
															<renderConditions logictype="and">
																<renderCondition type="fieldvalue" operator="=" fieldmodel="UI" sourcetype="fieldvalue" field="resetStatus" value="complete" enclosevalueinquotes="true"/>
															</renderConditions>
															<styles>
																<spacing bottom="3"/>
															</styles>
														</skuid__messageArea>
														<skuid__buttonSet uniqueid="sk-74j-23031" expandToFill="false" position="center">
															<groups>
																<skuid__buttonGroup uniqueId="sk-74j-23032" displayType="detached">
																	<buttons>
																		<skuid__button label="Back to log in" uniqueId="back-to-login-button" styleSettingsVariant="c217118d-b5a0-4759-b20f-01604730a904">
																			<actions>
																				<action type="redirect" window="self" url="/ui/login"/>
																			</actions>
																		</skuid__button>
																	</buttons>
																</skuid__buttonGroup>
															</groups>
															<styles>
																<spacing/>
															</styles>
														</skuid__buttonSet>
													</components>
													<styles>
														<spacing/>
													</styles>
													<background/>
													<renderConditions logictype="or">
														<renderCondition type="fieldvalue" operator="!=" enclosevalueinquotes="true" fieldmodel="UI" sourcetype="fieldvalue" nosourcerowbehavior="deactivate" field="resetStatus" value="lockedOut"/>
													</renderConditions>
													<styleVariantConditions/>
												</skuid__wrapper>
											</components>
											<background/>
											<interactions/>
											<renderConditions logictype="and"/>
											<styleVariantConditions/>
										</skuid__wrapper>
									</components>
									<styles>
										<spacing bottom="6"/>
									</styles>
									<background/>
								</skuid__wrapper>
							</components>
						</division>
					</divisions>
				</skuid__grid>
			</components>
		</pageregioncontent>
	</pageregioncontents>
	<components/>
	<resources>
		<labels/>
		<javascript>
			<jsitem location="inlinesnippet" name="autoFocus" cachelocation="false">setTimeout( function() {skuid.$('#password-reset-username-input').find('input').focus()}, 1)</jsitem>
		</javascript>
		<css/>
		<actionsequences>
			<actionsequence id="318434f3-5d08-4663-84d7-46643c8c6265" label="Page Load" type="event-triggered" event-scope="component" event-name="page.rendered">
				<description/>
				<actions>
					<action type="custom" snippet="autoFocus"/>
				</actions>
			</actionsequence>
		</actionsequences>
	</resources>
	<styles>
		<styleitem type="background" bgtype="none"/>
	</styles>
</skuid__page>
